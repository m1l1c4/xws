(this["webpackJsonprent-a-car"]=this["webpackJsonprent-a-car"]||[]).push([[6],{37:function(e,t,a){"use strict";a.r(t);var n=a(43),l=a(44),r=a(49),o=a(47),i=a(46),s=a(0),c=a.n(s),m=a(179),d=a(5),u=a(10),h=a(196),g=a(146),p=a(197),E=a(198),f=a(125),v=a(199),b=a(200),y=(a(371),a(147)),S=a(148),k=a(58),x=a(52),C=a.n(x),D=a(54),j="https://localhost:8082/",w=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var l;Object(n.a)(this,a),(l=t.call(this,e)).loadUsers=function(){var e=localStorage.getItem("ulogovan"),t="Bearer ".concat(e);C()({method:"get",url:j+"authpoint/user",headers:{Authorization:t}}).then((function(e){console.log("USERS",e.data),l.setState({users:e.data}),e.status}),(function(e){}))},l.changePermission=function(e,t,a){var n=localStorage.getItem("ulogovan"),r="Bearer ".concat(n);C()({method:"put",url:j+"authpoint/user/"+t+"/"+a,headers:{Authorization:r}}).then((function(e){console.log(e.data),200===e.status&&l.loadUsers()}),(function(e){}))},l.handleDelete=function(e,t){var a=localStorage.getItem("ulogovan"),n="Bearer ".concat(a);C()({method:"delete",url:j+"authpoint/user/"+t,headers:{Authorization:n}}).then((function(e){console.log(e.data),200===e.status?(D.NotificationManager.info("User have been removed."),l.loadUsers()):D.NotificationManager.error("Failed to remove user.")}),(function(e){}))},l.handleActivation=function(e,t){console.log(t);var a=localStorage.getItem("ulogovan"),n="Bearer ".concat(a);C()({method:"get",url:j+"authpoint/dash/verify/"+t,headers:{Authorization:n}}).then((function(e){console.log(e.data),200===e.status?(D.NotificationManager.info("Activation mail sent."),l.loadUsers()):D.NotificationManager.error("Failed to send activation mail.")}),(function(e){}))},l.handleBlock=function(e,t){var a=localStorage.getItem("ulogovan"),n="Bearer ".concat(a);C()({method:"get",url:j+"authpoint/user/deactivate/"+t,headers:{Authorization:n}}).then((function(e){console.log(e.data),200===e.status?(D.NotificationManager.info("User is blocked."),l.loadUsers()):D.NotificationManager.error("Failed to block user.")}),(function(e){}))},l.handleUnblock=function(e,t){var a=localStorage.getItem("ulogovan"),n="Bearer ".concat(a);C()({method:"get",url:j+"authpoint/user/activate/"+t,headers:{Authorization:n}}).then((function(e){console.log(e.data),200===e.status?(D.NotificationManager.info("User is unblocked."),l.loadUsers()):D.NotificationManager.error("Failed to unblock user.")}),(function(e){}))},l.state={users:[]};var r=[];return r.push(localStorage.getItem("role")),l.userRoles=r,l.allowedRoles=["ROLE_ADMIN"],l}return Object(l.a)(a,[{key:"componentDidMount",value:function(){console.log("assadsabdas"),this.loadUsers()}},{key:"render",value:function(){var e=this,t=this.state.users.map((function(t){return!1===t.deleted&&c.a.createElement("tr",{key:t.id},c.a.createElement("td",null,t.username),c.a.createElement("td",null,t.email),!t.deleted&&c.a.createElement("td",null,c.a.createElement("button",{onClick:function(a){return e.handleDelete(a,t.id)},className:"btn btn-primary"},"Delete")),!t.activated&&c.a.createElement("td",null,c.a.createElement("button",{onClick:function(a){return e.handleActivation(a,t.id)},className:"btn btn-primary"},"Activate")),!t.blocked&&c.a.createElement("td",null,c.a.createElement("button",{onClick:function(a){return e.handleBlock(a,t.id)},className:"btn btn-primary"},"Block")),t.blocked&&c.a.createElement("td",null,c.a.createElement("button",{onClick:function(a){return e.handleUnblock(a,t.id)},className:"btn btn-primary"},"Unblock")),null!==t.endUserDTO&&c.a.createElement("td",null," ",t.endUserDTO.numberRefusedComments," "),null!==t.endUserDTO&&c.a.createElement("td",null," ",t.endUserDTO.numberCanceledRequest," "),null!==t.endUserDTO&&t.endUserDTO.canComment&&c.a.createElement("td",null,c.a.createElement("button",{onClick:function(a){return e.changePermission(a,"blockComment",t.username)},className:"btn btn-primary"},"Block commenting")),null!==t.endUserDTO&&t.endUserDTO.canReserve&&c.a.createElement("td",null,c.a.createElement("button",{onClick:function(a){return e.changePermission(a,"blockReserve",t.username)},className:"btn btn-primary"},"Block reserving")),null!==t.endUserDTO&&!t.endUserDTO.canComment&&c.a.createElement("td",null,c.a.createElement("button",{onClick:function(a){return e.changePermission(a,"alloweComment",t.username)},className:"btn btn-primary"},"Allowe commenting")),null!==t.endUserDTO&&!t.endUserDTO.canReserve&&c.a.createElement("td",null,c.a.createElement("button",{onClick:function(a){return e.changePermission(a,"alloweReserve",t.username)},className:"btn btn-primary"},"Allowe reserving")))}));console.log(this.state.users);var a=c.a.createElement("div",{className:"content"},c.a.createElement(y.a,null,c.a.createElement(S.a,{lg:"3",md:"6",sm:"6"},c.a.createElement("table",{className:"table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{scope:"col"},"Username"),c.a.createElement("th",{scope:"col"},"Email"),c.a.createElement("th",{scope:"col"}),c.a.createElement("th",{scope:"col"}),c.a.createElement("th",{scope:"col"},"Refused comments"),c.a.createElement("th",{scope:"col"},"Canceled request"))),c.a.createElement("tbody",null,t)))),c.a.createElement(D.NotificationContainer,null));return this.rolesMatched()?a:c.a.createElement(d.a,{to:"/ads"})}}]),a}(k.RoleAwareComponent),T=a(465),N=a.n(T),O=a(150),M=a(218),A=a(219),R=a(151),z=a(124),I=a(234),P=a(108),V=(c.a.Component,c.a.Component,a(217)),F=a(152),L=a(178),B=a(176),U=function(e){Object(o.a)(r,e);var t=Object(i.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"content"},c.a.createElement(y.a,null,c.a.createElement(S.a,{md:"4"},c.a.createElement(O.a,{className:"card-user"},c.a.createElement("div",{className:"image"},c.a.createElement("img",{alt:"...",src:a(485)})),c.a.createElement(R.a,null,c.a.createElement("div",{className:"author"},c.a.createElement("a",{href:"#pablo",onClick:function(e){return e.preventDefault()}},c.a.createElement("img",{alt:"...",className:"avatar border-gray",src:a(486)}),c.a.createElement("h5",{className:"title"},"Chet Faker")),c.a.createElement("p",{className:"description"},"@chetfaker")),c.a.createElement("p",{className:"description text-center"},'"I like the way you work it ',c.a.createElement("br",null),"No diggity ",c.a.createElement("br",null),'I wanna bag it up"')),c.a.createElement(V.a,null,c.a.createElement("hr",null),c.a.createElement("div",{className:"button-container"},c.a.createElement(y.a,null,c.a.createElement(S.a,{className:"ml-auto",lg:"3",md:"6",xs:"6"},c.a.createElement("h5",null,"12 ",c.a.createElement("br",null),c.a.createElement("small",null,"Files"))),c.a.createElement(S.a,{className:"ml-auto mr-auto",lg:"4",md:"6",xs:"6"},c.a.createElement("h5",null,"2GB ",c.a.createElement("br",null),c.a.createElement("small",null,"Used"))),c.a.createElement(S.a,{className:"mr-auto",lg:"3"},c.a.createElement("h5",null,"24,6$ ",c.a.createElement("br",null),c.a.createElement("small",null,"Spent"))))))),c.a.createElement(O.a,null,c.a.createElement(M.a,null,c.a.createElement(A.a,{tag:"h4"},"Team Members")),c.a.createElement(R.a,null,c.a.createElement("ul",{className:"list-unstyled team-members"},c.a.createElement("li",null,c.a.createElement(y.a,null,c.a.createElement(S.a,{md:"2",xs:"2"},c.a.createElement("div",{className:"avatar"},c.a.createElement("img",{alt:"...",className:"img-circle img-no-padding img-responsive",src:a(487)}))),c.a.createElement(S.a,{md:"7",xs:"7"},"DJ Khaled ",c.a.createElement("br",null),c.a.createElement("span",{className:"text-muted"},c.a.createElement("small",null,"Offline"))),c.a.createElement(S.a,{className:"text-right",md:"3",xs:"3"},c.a.createElement(P.a,{className:"btn-round btn-icon",color:"success",outline:!0,size:"sm"},c.a.createElement("i",{className:"fa fa-envelope"}))))),c.a.createElement("li",null,c.a.createElement(y.a,null,c.a.createElement(S.a,{md:"2",xs:"2"},c.a.createElement("div",{className:"avatar"},c.a.createElement("img",{alt:"...",className:"img-circle img-no-padding img-responsive",src:a(488)}))),c.a.createElement(S.a,{md:"7",xs:"7"},"Creative Tim ",c.a.createElement("br",null),c.a.createElement("span",{className:"text-success"},c.a.createElement("small",null,"Available"))),c.a.createElement(S.a,{className:"text-right",md:"3",xs:"3"},c.a.createElement(P.a,{className:"btn-round btn-icon",color:"success",outline:!0,size:"sm"},c.a.createElement("i",{className:"fa fa-envelope"}))))),c.a.createElement("li",null,c.a.createElement(y.a,null,c.a.createElement(S.a,{md:"2",xs:"2"},c.a.createElement("div",{className:"avatar"},c.a.createElement("img",{alt:"...",className:"img-circle img-no-padding img-responsive",src:a(489)}))),c.a.createElement(S.a,{className:"col-ms-7",xs:"7"},"Flume ",c.a.createElement("br",null),c.a.createElement("span",{className:"text-danger"},c.a.createElement("small",null,"Busy"))),c.a.createElement(S.a,{className:"text-right",md:"3",xs:"3"},c.a.createElement(P.a,{className:"btn-round btn-icon",color:"success",outline:!0,size:"sm"},c.a.createElement("i",{className:"fa fa-envelope"}))))))))),c.a.createElement(S.a,{md:"8"},c.a.createElement(O.a,{className:"card-user"},c.a.createElement(M.a,null,c.a.createElement(A.a,{tag:"h5"},"Edit Profile")),c.a.createElement(R.a,null,c.a.createElement(F.a,null,c.a.createElement(y.a,null,c.a.createElement(S.a,{className:"pr-1",md:"5"},c.a.createElement(L.a,null,c.a.createElement("label",null,"Company (disabled)"),c.a.createElement(B.a,{defaultValue:"Creative Code Inc.",disabled:!0,placeholder:"Company",type:"text"}))),c.a.createElement(S.a,{className:"px-1",md:"3"},c.a.createElement(L.a,null,c.a.createElement("label",null,"Username"),c.a.createElement(B.a,{defaultValue:"michael23",placeholder:"Username",type:"text"}))),c.a.createElement(S.a,{className:"pl-1",md:"4"},c.a.createElement(L.a,null,c.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Email address"),c.a.createElement(B.a,{placeholder:"Email",type:"email"})))),c.a.createElement(y.a,null,c.a.createElement(S.a,{className:"pr-1",md:"6"},c.a.createElement(L.a,null,c.a.createElement("label",null,"First Name"),c.a.createElement(B.a,{defaultValue:"Chet",placeholder:"Company",type:"text"}))),c.a.createElement(S.a,{className:"pl-1",md:"6"},c.a.createElement(L.a,null,c.a.createElement("label",null,"Last Name"),c.a.createElement(B.a,{defaultValue:"Faker",placeholder:"Last Name",type:"text"})))),c.a.createElement(y.a,null,c.a.createElement(S.a,{md:"12"},c.a.createElement(L.a,null,c.a.createElement("label",null,"Address"),c.a.createElement(B.a,{defaultValue:"Melbourne, Australia",placeholder:"Home Address",type:"text"})))),c.a.createElement(y.a,null,c.a.createElement(S.a,{className:"pr-1",md:"4"},c.a.createElement(L.a,null,c.a.createElement("label",null,"City"),c.a.createElement(B.a,{defaultValue:"Melbourne",placeholder:"City",type:"text"}))),c.a.createElement(S.a,{className:"px-1",md:"4"},c.a.createElement(L.a,null,c.a.createElement("label",null,"Country"),c.a.createElement(B.a,{defaultValue:"Australia",placeholder:"Country",type:"text"}))),c.a.createElement(S.a,{className:"pl-1",md:"4"},c.a.createElement(L.a,null,c.a.createElement("label",null,"Postal Code"),c.a.createElement(B.a,{placeholder:"ZIP Code",type:"number"})))),c.a.createElement(y.a,null,c.a.createElement(S.a,{md:"12"},c.a.createElement(L.a,null,c.a.createElement("label",null,"About Me"),c.a.createElement(B.a,{type:"textarea",defaultValue:"Oh so, your weak rhyme You doubt I'll bother, reading into it"})))),c.a.createElement(y.a,null,c.a.createElement("div",{className:"update ml-auto mr-auto"},c.a.createElement(P.a,{className:"btn-round",color:"primary",type:"submit"},"Update Profile"))))))))))}}]),r}(c.a.Component),K=a(232),q=a(223),_=a(201),W=a(230),Y=a(226),H=a(177),Z=(a(76),a(64),"https://localhost:8082/"),G=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var l;Object(n.a)(this,a),(l=t.call(this,e)).getCodebook=function(){var e=localStorage.getItem("ulogovan"),t="Bearer ".concat(e);C()({method:"get",url:Z+"advertisement/codebook",headers:{Authorization:t}}).then((function(e){200===e.status&&l.setState({codebook:e.data})}),(function(e){console.log(e)}))},l.state={tip:"brand",sifra:"",naziv:"",activeTab:new Array(6).fill("1"),codebook:[],editName:"",editCode:"",editId:"",hideEdit:!0};var o=[];return o.push(localStorage.getItem("role")),l.userRoles=o,l.allowedRoles=["ROLE_SELLER","ROLE_ADMIN"],l.edit=l.edit.bind(Object(r.a)(l)),l.getCodebook=l.getCodebook.bind(Object(r.a)(l)),l}return Object(l.a)(a,[{key:"toggle",value:function(e,t){var a=this.state.activeTab.slice();a[e]=t,this.setState({activeTab:a})}},{key:"editCodebook",value:function(e,t,a,n,l){this.setState({hideEdit:!1,editCode:a,editName:t,editTip:n,editId:e})}},{key:"deleteCodebook",value:function(e,t){var a=this,n=localStorage.getItem("ulogovan"),l="Bearer ".concat(n);C()({method:"delete",url:Z+"advertisement/codebook/"+e,headers:{Authorization:l}}).then((function(t){console.log(t);var n=a.state.codebook.filter((function(t){return t.id!==e}));a.setState({codebook:n}),D.NotificationManager.success("Successfully deleted!","",3e3)}),(function(e){console.log(e)}))}},{key:"edit",value:function(e){var t=this;e.preventDefault();var a=localStorage.getItem("ulogovan"),n="Bearer ".concat(a),l=this.editSifraValidation(this.state.editCode);if(l=this.editNazivValidation(this.state.editName)&&l){var r={code:this.state.editCode,name:this.state.editName,codeType:this.state.editTip};C()({method:"put",url:Z+"advertisement/codebook/"+this.state.editId,data:r,headers:{Authorization:n}}).then((function(e){console.log(e.status),t.resetEdit();var a=t.state.codebook.filter((function(e){return e.id!==t.state.editId}));a.push(e.data),t.setState({codebook:a}),D.NotificationManager.success("Successfully edited!","",3e3)}),(function(e){console.log(e),t.resetEdit()}))}else this.resetEdit()}},{key:"editTipValidation",value:function(e){this.setState({editTip:e})}},{key:"tabPane",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(K.a,{tabId:"1"},this.renderTable("brand")),c.a.createElement(K.a,{tabId:"2"},this.renderTable("model")),c.a.createElement(K.a,{tabId:"3"},this.renderTable("class")),c.a.createElement(K.a,{tabId:"4"},this.renderTable("gearbox")),c.a.createElement(K.a,{tabId:"5"},this.renderTable("fuel")))}},{key:"renderTable",value:function(e){var t=this;return c.a.createElement(c.a.Fragment,null,c.a.createElement(O.a,null,c.a.createElement(M.a,null),c.a.createElement(R.a,null,c.a.createElement(q.a,{responsive:!0},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"#"),c.a.createElement("th",null,"Name"),c.a.createElement("th",null,"Code"))),c.a.createElement("tbody",null,this.state.codebook.filter((function(t){return t.codeType===e})).map((function(a,n){return c.a.createElement("tr",{key:e+"_"+a.name},c.a.createElement("td",null,n+1),c.a.createElement("td",null,a.name),c.a.createElement("td",null,a.code),c.a.createElement("td",null,c.a.createElement(P.a,{block:!0,className:"btn-round",color:"info",onClick:function(e){return t.editCodebook(a.id,a.name,a.code,a.codeType,e)}},"Edit")),c.a.createElement("td",null,c.a.createElement(P.a,{block:!0,className:"btn-round",color:"info",onClick:function(e){return t.deleteCodebook(a.id,e)}},"Delete")))})))))))}},{key:"submit",value:function(e){var t=this;e.preventDefault();var a=localStorage.getItem("ulogovan"),n="Bearer ".concat(a),l=this.sifraValidation(this.state.sifra);if(l=this.nazivValidation(this.state.naziv)&&l){var r={code:this.state.sifra,name:this.state.naziv,codeType:this.state.tip};C()({method:"post",url:Z+"advertisement/codebook",data:r,headers:{Authorization:n}}).then((function(e){console.log(e.status),t.reset();var a=t.state.codebook;a.push(e.data),t.setState({codebook:a}),D.NotificationManager.success("Successfully added!","",3e3)}),(function(e){console.log(e),t.reset()}))}else this.reset()}},{key:"componentDidMount",value:function(){this.getCodebook()}},{key:"reset",value:function(){this.setState({tip:"brand",sifra:"",naziv:"",tipText:"",sifraText:"",nazivText:""})}},{key:"tipValidation",value:function(e){this.setState({tip:e}),console.log(e)}},{key:"editNazivValidation",value:function(e){e=(e=(e=(e=e.replace(/</g,"")).replace(/>/g,"")).replace(/script/g,"")).replace(/alert/g,""),this.setState({editName:e});return""===e?(this.setState({editTextName:"Ovo polje ne moze biti prazno"}),console.log(e),!1):(this.setState({editTextName:""}),console.log(e),!0)}},{key:"editSifraValidation",value:function(e){e=(e=(e=(e=e.replace(/</g,"")).replace(/>/g,"")).replace(/script/g,"")).replace(/alert/g,""),this.setState({editCode:e});return""===e||void 0===e?(this.setState({editTextCode:"Ovo polje ne moze biti prazno"}),console.log(e),!1):(this.setState({editTextCode:""}),console.log(e),!0)}},{key:"resetEdit",value:function(){this.setState({hideEdit:!0,editCode:"",editName:"",editTip:"",editTextCode:"",editTextName:"",editeTextTip:""})}},{key:"nazivValidation",value:function(e){this.setState({naziv:e});return""===e?(this.setState({nazivText:"Ovo polje ne moze biti prazno"}),console.log(e),!1):(this.setState({nazivText:""}),console.log(e),!0)}},{key:"sifraValidation",value:function(e){this.setState({sifra:e});return""===e||void 0===e?(this.setState({sifraText:"Ovo polje ne moze biti prazno"}),console.log(e),!1):(this.setState({sifraText:""}),console.log(e),!0)}},{key:"render",value:function(){var e=this,t=c.a.createElement("div",{className:"content"},c.a.createElement("div",{className:"animated fadeIn"},c.a.createElement(y.a,null,c.a.createElement(S.a,{xs:"12",md:"6",className:"mb-4"},c.a.createElement(v.a,{tabs:!0},c.a.createElement(b.a,null,c.a.createElement(_.a,{active:"1"===this.state.activeTab[0],onClick:function(){e.toggle(0,"1")}},"Brands")),c.a.createElement(b.a,null,c.a.createElement(_.a,{active:"2"===this.state.activeTab[0],onClick:function(){e.toggle(0,"2")}},"Models")),c.a.createElement(b.a,null,c.a.createElement(_.a,{active:"3"===this.state.activeTab[0],onClick:function(){e.toggle(0,"3")}},"Car class")),c.a.createElement(b.a,null,c.a.createElement(_.a,{active:"4"===this.state.activeTab[0],onClick:function(){e.toggle(0,"4")}},"Gearbox types")),c.a.createElement(b.a,null,c.a.createElement(_.a,{active:"5"===this.state.activeTab[0],onClick:function(){e.toggle(0,"5")}},"Fuel types"))),c.a.createElement(W.a,{activeTab:this.state.activeTab[0]},this.tabPane()))),c.a.createElement(y.a,null,c.a.createElement(S.a,{xs:"12",md:"6"},c.a.createElement(O.a,null,c.a.createElement(M.a,null,c.a.createElement("strong",null,"Dodavanje novog sifrarnika")),c.a.createElement(R.a,null,c.a.createElement(F.a,{action:"",method:"post",encType:"multipart/form-data",className:"form-horizontal"},c.a.createElement(y.a,null,c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"select"},"Izaberite tip")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"select",value:this.state.tip,onChange:function(t){e.tipValidation(t.target.value)}},c.a.createElement("option",{value:"brand"},"Marka automobila"),c.a.createElement("option",{value:"model"},"Model automobila"),c.a.createElement("option",{value:"class"},"Klasa automobila"),c.a.createElement("option",{value:"fuel"},"Vrsta goriva"),c.a.createElement("option",{value:"gearbox"},"Tip mjenjaca")))))),c.a.createElement(y.a,null,c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"password-input"},"Sifra")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"text",value:this.state.sifra,name:"password-input",onChange:function(t){return e.sifraValidation(t.target.value)},placeholder:"sifra"}),c.a.createElement(H.a,{color:"danger"},this.state.sifraText))))),c.a.createElement(y.a,null,c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"password-input"},"Naziv")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"text",value:this.state.naziv,name:"password-input",onChange:function(t){return e.nazivValidation(t.target.value)},placeholder:"naziv"}),c.a.createElement(H.a,{color:"danger"},this.state.nazivText))))),c.a.createElement("br",null))),c.a.createElement(V.a,null,c.a.createElement(P.a,{type:"submit",size:"sm",color:"primary",onClick:function(t){return e.submit(t)}},c.a.createElement("i",{className:"fa fa-dot-circle-o"})," Dodaj sifrarnik"),c.a.createElement(P.a,{type:"reset",size:"sm",color:"danger",onClick:function(t){return e.reset()}},c.a.createElement("i",{className:"fa fa-ban"})," Ponisti")))),c.a.createElement(S.a,{xs:"12",md:"6",hidden:this.state.hideEdit},c.a.createElement(O.a,null,c.a.createElement(M.a,null,c.a.createElement("strong",null,"Izmjena sifrarnika")),c.a.createElement(R.a,null,c.a.createElement(F.a,{action:"",method:"post",encType:"multipart/form-data",className:"form-horizontal"},c.a.createElement(y.a,null,c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"select"},"Izaberite tip")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{disabled:!0,type:"select",value:this.state.editTip,onChange:function(t){e.editTipValidation(t.target.value)}},c.a.createElement("option",{value:"brand"},"Marka automobila"),c.a.createElement("option",{value:"model"},"Model automobila"),c.a.createElement("option",{value:"class"},"Klasa automobila"),c.a.createElement("option",{value:"fuel"},"Vrsta goriva"),c.a.createElement("option",{value:"gearbox"},"Tip mjenjaca")))))),c.a.createElement(y.a,null,c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"password-input"},"Sifra")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"text",value:this.state.editCode,name:"password-input",onChange:function(t){return e.editSifraValidation(t.target.value)},placeholder:"sifra"}),c.a.createElement(H.a,{color:"danger"},this.state.editSifraText))))),c.a.createElement(y.a,null,c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"password-input"},"Naziv")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"text",value:this.state.editName,name:"password-input",onChange:function(t){return e.editNazivValidation(t.target.value)},placeholder:"naziv"}),c.a.createElement(H.a,{color:"danger"},this.state.editNazivText))))),c.a.createElement("br",null))),c.a.createElement(V.a,null,c.a.createElement(P.a,{type:"submit",size:"sm",color:"primary",onClick:function(t){return e.edit(t)}},c.a.createElement("i",{className:"fa fa-dot-circle-o"})," Edit"),c.a.createElement(P.a,{type:"reset",size:"sm",color:"danger",onClick:function(t){return e.resetEdit(t)}},c.a.createElement("i",{className:"fa fa-ban"})," Cancel")))))),c.a.createElement(D.NotificationContainer,null));return this.rolesMatched()?t:c.a.createElement(d.a,{to:"/ads"})}}]),a}(k.RoleAwareComponent),J=a(227),X=a(228),$=a(229),Q="https://localhost:8082/",ee=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var l;Object(n.a)(this,a),(l=t.call(this,e)).getPricelist=function(){var e=localStorage.getItem("ulogovan"),t="Bearer ".concat(e);C()({method:"get",url:Q+"advertisement/pricelist",headers:{Authorization:t}}).then((function(e){200===e.status&&l.setState({pricelists:e.data,showpricelist:e.data.slice(0,5)})}),(function(e){console.log(e)}))},l.state={cijenaPoDanu:"",popustZaDC:"",popust30:"",popust20:"",Text20:"",Text30:"",dcText:"",danText:"",collapse:!0,fadeIn:!0,timeout:300,pricelists:[],exceed:"",exceedText:"",showpricelist:[],hideEdit:!0,editCijenaPoDanu:"",editPopustZaDC:"",editPopust30:"",editPopust20:"",editExceed:"",editTextDay:"",editText20:"",editText30:"",editTextDC:"",ediTextEx:"",editId:""};var o=[];return o.push(localStorage.getItem("role")),l.userRoles=o,l.allowedRoles=["ROLE_SELLER","ROLE_ADMIN"],l.editPricelist=l.editPricelist.bind(Object(r.a)(l)),l}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getPricelist()}},{key:"edit",value:function(e){var t=this;e.preventDefault();var a=localStorage.getItem("ulogovan"),n="Bearer ".concat(a),l=!0;if(l=this.editCijenaPoDanuValidation(this.state.editCijenaPoDanu),l=this.editDcValidation(this.state.editPopustZaDC)&&l,l=this.editPopust20Validation(this.state.editPopust20)&&l,l=this.editPopust30Validation(this.state.editPopust30)&&l,l=this.editExceedValidation(this.state.editExcees)&&l){var r={priceDay:this.state.editCijenaPoDanu,collisionDW:this.state.editPopustZaDC,discount20:this.state.editPopust20,discount30:this.state.editPopust30,exceedMileage:this.state.editExceed};C()({method:"put",url:Q+"advertisement/pricelist/"+this.state.editId,data:r,headers:{Authorization:n}}).then((function(e){console.log(e.status),t.resetEdit();var a=t.state.pricelists;a.push(e.data),t.setState({pricelists:a}),D.NotificationManager.success("Successfully edited!","",3e3)}),(function(e){console.log(e)}))}else this.resetEdit()}},{key:"handlePageChange",value:function(e){var t=5*(e-1);this.setState({activePage:e,showpricelist:this.state.pricelists.slice(t,t+5)})}},{key:"toggle",value:function(){this.setState({collapse:!this.state.collapse})}},{key:"toggleFade",value:function(){this.setState((function(e){return{fadeIn:!e}}))}},{key:"resetEdit",value:function(){this.setState({hideEdit:!0,editCijenaPoDanu:"",editPopust20:"",editPopust30:"",editPopustZaDC:"",editText30:"",ediTextEx:"",editText20:"",editTextDC:"",editTextDay:"",ediTextEx:""})}},{key:"editPricelist",value:function(e,t,a,n,l,r,o){this.setState({hideEdit:!1,editCijenaPoDanu:t,editPopust20:n,editPopust30:l,editExceed:r,editPopustZaDC:a,editId:e})}},{key:"deletePricelist",value:function(e,t){var a=this,n=localStorage.getItem("ulogovan"),l="Bearer ".concat(n);C()({method:"delete",url:Q+"advertisement/pricelist/"+e,headers:{Authorization:l}}).then((function(t){console.log(t);var n=a.state.pricelists;n.filter((function(t){return t.id===e})),a.setState({pricelists:n}),D.NotificationManager.success("Successfully deleted!","",3e3)}),(function(e){console.log(e)}))}},{key:"editExceedValidation",value:function(e){this.setState({editExceed:e});var t=e;return""===t?(this.setState({ediTextEx:"Ovo polje ne moze biti prazno"}),!1):t<0?(this.setState({ediTextEx:"Cijena mora biti pozitivan broj"}),!1):(this.setState({ediTextEx:""}),!0)}},{key:"editCijenaPoDanuValidation",value:function(e){this.setState({editCijenaPoDanu:e});var t=e;return""===t?(this.setState({editTextDay:"Ovo polje ne moze biti prazno"}),!1):t<0?(this.setState({editTextDay:"Cijena mora biti pozitivan broj"}),!1):(this.setState({editTextDay:""}),!0)}},{key:"editDcValidation",value:function(e){this.setState({editPopustZaDC:e});var t=e;return""===t?(this.setState({editTextDC:"Ovo polje ne moze biti prazno"}),!1):t<0||t>100?(this.setState({editTextDC:"Popust mora biti u rasponu 0-100"}),!1):(this.setState({editTextDC:""}),!0)}},{key:"editPopust20Validation",value:function(e){this.setState({editPopust20:e});var t=e;return""===t?(this.setState({editText20:"Ovo polje ne moze biti prazno"}),!1):t<0||t>100?(this.setState({editText20:"Popust mora biti u rasponu 0-100"}),!1):(this.setState({editText20:""}),!0)}},{key:"editPopust30Validation",value:function(e){this.setState({editPopust30:e});var t=e;return""===t?(this.setState({editText30:"Ovo polje ne moze biti prazno"}),!1):t<0||t>100?(this.setState({editText30:"Popust mora biti u rasponu 0-100"}),!1):(this.setState({editText30:""}),!0)}},{key:"submit",value:function(e){var t=this;e.preventDefault();var a=localStorage.getItem("ulogovan"),n="Bearer ".concat(a),l=!0;if(l=this.cijenaPoDanuValidation(this.state.cijenaPoDanu),l=this.dcValidation(this.state.popustZaDC)&&l,l=this.popust20Validation(this.state.popust20)&&l,l=this.popust30Validation(this.state.popust30)&&l,l=this.exceedValidation(this.state.excees)&&l){var r={priceDay:this.state.cijenaPoDanu,collisionDW:this.state.popustZaDC,discount20:this.state.popust20,discount30:this.state.popust30,exceedMileage:this.state.exceed};C()({method:"post",url:Q+"advertisement/pricelist",data:r,headers:{Authorization:n}}).then((function(e){console.log(e.status);var a=t.state.pricelists;a.push(e.data),t.setState({pricelists:a}),t.setState({showpricelist:a.slice(5*t.state.activePage,5*t.state.activePage+5)}),t.reset(),D.NotificationManager.success("Successfully added!","",3e3)}),(function(e){console.log(e)}))}else this.reset()}},{key:"reset",value:function(){this.setState({cijenaPoDanu:"",popust20:"",popust30:"",popustZaDC:"",Text20:"",Text30:"",dcText:"",danText:"",exceed:"",exceedText:""})}},{key:"cijenaPoDanuValidation",value:function(e){this.setState({cijenaPoDanu:e});var t=e;return""===t?(this.setState({danText:"Ovo polje ne moze biti prazno"}),!1):t<0?(this.setState({danText:"Cijena mora biti pozitivan broj"}),!1):(this.setState({danText:""}),!0)}},{key:"exceedValidation",value:function(e){this.setState({exceed:e});var t=e;return""===t?(this.setState({exceedText:"Ovo polje ne moze biti prazno"}),!1):t<0?(this.setState({exceedText:"Cijena mora biti pozitivan broj"}),!1):(this.setState({exceedText:""}),!0)}},{key:"dcValidation",value:function(e){this.setState({popustZaDC:e});var t=e;return""===t?(this.setState({dcText:"Ovo polje ne moze biti prazno"}),!1):t<0||t>100?(this.setState({dcText:"Popust mora biti u rasponu 0-100"}),!1):(this.setState({dcText:""}),!0)}},{key:"popust20Validation",value:function(e){this.setState({popust20:e});var t=e;return""===t?(this.setState({Text20:"Ovo polje ne moze biti prazno"}),!1):t<0||t>100?(this.setState({Text20:"Popust mora biti u rasponu 0-100"}),!1):(this.setState({Text20:""}),!0)}},{key:"popust30Validation",value:function(e){this.setState({popust30:e});var t=e;return""===t?(this.setState({Text30:"Ovo polje ne moze biti prazno"}),!1):t<0||t>100?(this.setState({Text30:"Popust mora biti u rasponu 0-100"}),!1):(this.setState({Text30:""}),!0)}},{key:"render",value:function(){var e=this,t=this.state.pricelists.length,a=Array.from(Array(Math.ceil(t/5)).keys()),n=c.a.createElement("div",{className:"content"},c.a.createElement("div",{className:"animated fadeIn"},c.a.createElement(y.a,null,c.a.createElement(S.a,{xs:"12",md:"12"},c.a.createElement(O.a,null,c.a.createElement(M.a,null,c.a.createElement("strong",null,"Pricelists")),c.a.createElement(R.a,null,c.a.createElement("div",null,c.a.createElement("section",{className:"bar pt-0"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-12"},c.a.createElement("div",{className:"box mt-0 mb-lg-0"},c.a.createElement("div",{className:"table-responsive"},c.a.createElement("table",{className:"table table-hover"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{className:"text-primary font-weight-bold"},"Day price"),c.a.createElement("th",{className:"text-primary font-weight-bold"},"Collision DW"),c.a.createElement("th",{className:"text-primary font-weight-bold"},"Discount 20 days"),c.a.createElement("th",{className:"text-primary font-weight-bold"},"Discount 30 days"),c.a.createElement("th",{className:"text-primary font-weight-bold"},"Exceed mileage"))),c.a.createElement("tbody",null,this.state.showpricelist.map((function(t){return c.a.createElement("tr",{key:t.id},c.a.createElement("td",null,t.priceDay," RSD"),c.a.createElement("td",null,t.collisionDW," RSD"),c.a.createElement("td",null,t.discount20," %"),c.a.createElement("td",null,t.discount30," %"),c.a.createElement("td",null,t.exceedMileage," RSD"),c.a.createElement("td",null,c.a.createElement(P.a,{block:!0,className:"btn-round",color:"info",onClick:function(a){return e.editPricelist(t.id,t.priceDay,t.collisionDW,t.discount20,t.discount30,t.exceedMileage,a)}},"Edit")),c.a.createElement("td",null,c.a.createElement(P.a,{block:!0,className:"btn-round",color:"info",onClick:function(a){return e.deletePricelist(t.id,a)}},"Delete")))}))))))))))),c.a.createElement(V.a,null,c.a.createElement("nav",null,c.a.createElement(J.a,null,c.a.createElement(X.a,null,c.a.createElement($.a,{disabled:1===this.state.activePage,previous:!0,tag:"button",onClick:function(t){return e.handlePageChange(e.state.activePage-1)}})),a.map((function(t){return c.a.createElement("div",null,c.a.createElement(X.a,{active:!0,hidden:e.state.activePage!==t+1},c.a.createElement($.a,{tag:"button"},t+1)),c.a.createElement(X.a,{hidden:e.state.activePage===t+1},c.a.createElement($.a,{tag:"button",onClick:function(a){return e.handlePageChange(t+1)}},t+1)))})),c.a.createElement(X.a,null,c.a.createElement($.a,{disabled:this.state.activePage===Math.ceil(t/5),next:!0,tag:"button",onClick:function(t){return e.handlePageChange(e.state.activePage+1)}})))))))),c.a.createElement(y.a,null,c.a.createElement(S.a,{xs:"12",md:"6"},c.a.createElement(O.a,null,c.a.createElement(M.a,null,c.a.createElement("strong",null,"Dodavanje novog cjenovnika")),c.a.createElement(R.a,null,c.a.createElement(F.a,{action:"",method:"post",encType:"multipart/form-data",className:"form-horizontal"},c.a.createElement(y.a,null,c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"text-input"},"Cijena po danu")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"number",id:"text-input",value:this.state.cijenaPoDanu,name:"text-input",placeholder:"... KM",onChange:function(t){return e.cijenaPoDanuValidation(t.target.value)}}),c.a.createElement(H.a,{color:"danger"},this.state.danText)))),c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"email-input"},"Popust za Demage Collision")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"number",id:"email-input",value:this.state.popustZaDC,name:"email-input",placeholder:"%",onChange:function(t){return e.dcValidation(t.target.value)}}),c.a.createElement(H.a,{color:"danger"},this.state.dcText))))),c.a.createElement(y.a,null,c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"password-input"},"Popus za preko 20 dana")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"number",id:"password-input",value:this.state.popust20,name:"password-input",onChange:function(t){return e.popust20Validation(t.target.value)},placeholder:"%",autoComplete:"new-password"}),c.a.createElement(H.a,{color:"danger"},this.state.Text20)))),c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"password-input"},"Popus za preko 30 dana")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"number",id:"password-input",value:this.state.popust30,name:"password-input",onChange:function(t){return e.popust30Validation(t.target.value)},placeholder:"%",autoComplete:"new-password"}),c.a.createElement(H.a,{color:"danger"},this.state.Text30))))),c.a.createElement(y.a,null,c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"password-input"},"Dodatno placanje za prekoracenje")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"number",id:"password-input",value:this.state.exceed,name:"password-input",onChange:function(t){return e.exceedValidation(t.target.value)},placeholder:"... RSD",autoComplete:"new-password"}),c.a.createElement(H.a,{color:"danger"},this.state.exceedText))))),c.a.createElement("br",null))),c.a.createElement(V.a,null,c.a.createElement(P.a,{type:"submit",size:"sm",color:"primary",onClick:function(t){return e.submit(t)}},c.a.createElement("i",{className:"fa fa-dot-circle-o"})," Dodaj cjenovnik"),c.a.createElement(P.a,{type:"reset",size:"sm",color:"danger",onClick:function(t){return e.reset()}},c.a.createElement("i",{className:"fa fa-ban"})," Ponisti")))),c.a.createElement(S.a,{xs:"12",md:"6",hidden:this.state.hideEdit},c.a.createElement(O.a,null,c.a.createElement(M.a,null,c.a.createElement("strong",null,"Edit pricelist")),c.a.createElement(R.a,null,c.a.createElement(F.a,{action:"",method:"post",encType:"multipart/form-data",className:"form-horizontal"},c.a.createElement(y.a,null,c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"text-input"},"Cijena po danu")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"number",id:"text-input",value:this.state.editCijenaPoDanu,name:"text-input",placeholder:"... KM",onChange:function(t){return e.editCijenaPoDanuValidation(t.target.value)}}),c.a.createElement(H.a,{color:"danger"},this.state.editTextDay)))),c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"email-input"},"Popust za Demage Collision")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"number",id:"email-input",value:this.state.editPopustZaDC,name:"email-input",placeholder:"%",onChange:function(t){return e.editDcValidation(t.target.value)}}),c.a.createElement(H.a,{color:"danger"},this.state.editTextDC))))),c.a.createElement(y.a,null,c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"password-input"},"Popus za preko 20 dana")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"number",id:"password-input",value:this.state.editPopust20,name:"password-input",onChange:function(t){return e.editPopust20Validation(t.target.value)},placeholder:"%",autoComplete:"new-password"}),c.a.createElement(H.a,{color:"danger"},this.state.editText20)))),c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"password-input"},"Popus za preko 30 dana")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"number",id:"password-input",value:this.state.editPopust30,name:"password-input",onChange:function(t){return e.editPopust30Validation(t.target.value)},placeholder:"%",autoComplete:"new-password"}),c.a.createElement(H.a,{color:"danger"},this.state.editText30))))),c.a.createElement(y.a,null,c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"password-input"},"Dodatno placanje za prekoracenje")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"number",id:"password-input",value:this.state.editExceed,name:"password-input",onChange:function(t){return e.editExceedValidation(t.target.value)},placeholder:"... RSD",autoComplete:"new-password"}),c.a.createElement(H.a,{color:"danger"},this.state.ediTextEx))))),c.a.createElement("br",null))),c.a.createElement(V.a,null,c.a.createElement(P.a,{type:"submit",size:"sm",color:"primary",onClick:function(t){return e.edit(t)}},c.a.createElement("i",{className:"fa fa-dot-circle-o"})," Edit"),c.a.createElement(P.a,{type:"reset",size:"sm",color:"danger",onClick:function(t){return e.resetEdit()}},c.a.createElement("i",{className:"fa fa-ban"})," Cancel")))))));return this.rolesMatched()?n:c.a.createElement(d.a,{to:"/ads"})}}]),a}(k.RoleAwareComponent),te="https://localhost:8082/",ae=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var l;Object(n.a)(this,a),(l=t.call(this,e)).fileObj=[],l.fileArray=[],l.lista=[],l.getPricelist=function(){var e=localStorage.getItem("ulogovan"),t="Bearer ".concat(e);C()({method:"get",url:te+"advertisement/pricelist",headers:{Authorization:t}}).then((function(e){200===e.status&&(l.setState({pricelists:e.data,showpricelist:e.data.slice(0,7)}),l.setState({cjenovnici:e.data,cjenovnikId:e.data[0].id}))}),(function(e){console.log(e)}))},l.getCodebook=function(){var e=localStorage.getItem("ulogovan"),t="Bearer ".concat(e);C()({method:"get",url:te+"advertisement/codebook",headers:{Authorization:t}}).then((function(e){200===e.status&&l.setState({codebook:e.data,gorivo:e.data.filter((function(e){return"fuel"===e.codeType}))[0].name,mjenjac:e.data.filter((function(e){return"gearbox"===e.codeType}))[0].name,marka:e.data.filter((function(e){return"brand"===e.codeType}))[0].name,model:e.data.filter((function(e){return"model"===e.codeType}))[0].name,klasa:e.data.filter((function(e){return"class"===e.codeType}))[0].name}),console.log(l.state.klasa)}),(function(e){console.log(e)}))},l.collisionValidation=function(e){e.target.checked?l.setState({collision:!0}):l.setState({collision:!1}),console.log(l.state.collision)},l.toggle=l.toggle.bind(Object(r.a)(l)),l.toggleFade=l.toggleFade.bind(Object(r.a)(l)),l.state={collapse:!0,fadeIn:!0,timeout:300,file:[null],marka:"",model:"",gorivo:"",mjenjac:"",klasa:"",brSjedista:"",kilometraza:"",maxKilometara:"",maxKilometraza:"",startDate:"",oglasiText:"",endDate:"",collision:!1,noviAuto:!0,cars:[],sakrij:!1,trenutniId:"",prikazAuto:!0,dugmeAuto:!0,novoAuto:!1,drugiZahtjev:!1,dodaoSlike:!1,slikeText:"",cjenovnikId:"",cjenovnici:[],possible:!1,city:"",cityText:"",codebook:[],pricelists:[],showpricelist:[],canAdd:!1,unlimitedMileage:!1,following:!1};var o=[];return o.push(localStorage.getItem("role")),l.userRoles=o,l.allowedRoles=["ROLE_CUSTOMER","ROLE_SELLER"],l.uploadMultipleFiles=l.uploadMultipleFiles.bind(Object(r.a)(l)),l.uploadFiles=l.uploadFiles.bind(Object(r.a)(l)),l.vratiFormu=l.vratiFormu.bind(Object(r.a)(l)),l.vratiAuto=l.vratiAuto.bind(Object(r.a)(l)),l.getCodebook=l.getCodebook.bind(Object(r.a)(l)),l.getPricelist=l.getPricelist.bind(Object(r.a)(l)),l}return Object(l.a)(a,[{key:"handlePageChange",value:function(e){var t=7*(e-1);this.setState({activePage:e,showpricelist:this.state.pricelists.slice(t,t+7)})}},{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("ulogovan"),a="Bearer ".concat(t);C()({method:"get",url:te+"advertisement/advertisement/cadEndUserAdd",headers:{Authorization:a}}).then((function(t){200===t.status&&e.setState({canAdd:!1})}),(function(t){console.log(t),e.setState({canAdd:!0})})),this.state.canAdd||(this.getCodebook(),this.getPricelist(),C()({method:"get",url:te+"advertisement/car",headers:{Authorization:a}}).then((function(t){200===t.status&&e.setState({cars:t.data,sakrij:!0,trenutniId:t.data[0].id,prikazAuto:!1,drugiZahtjev:!0})}),(function(e){console.log(e)})),C()({method:"get",url:te+"advertisement/pricelist",headers:{Authorization:a}}).then((function(t){200===t.status&&e.setState({pricelists:t.data,showpricelist:t.data.slice(0,7)}),e.setState({cjenovnici:t.data,cjenovnikId:t.data[0].id})}),(function(t){console.log(t),e.setState({possible:!0})})))}},{key:"uploadMultipleFiles",value:function(e){var t=this;this.fileObj.push(e.target.files),this.setState({dodaoSlike:!0});for(var a=0;a<this.fileObj[0].length;a++)this.fileArray.push(URL.createObjectURL(this.fileObj[0][a])),console.log(this.fileObj[0]);this.setState({file:this.fileArray}),console.log(this.fileArray),console.log(this.fileArray[0]);for(var n=e.target.files,l=0;l<n.length;l++){console.log(this.lista);var r=e.target.files;console.log(r);var o=new FileReader;o.readAsDataURL(r[l]),o.onload=function(e){console.log(e.target.result),t.lista.push(e.target.result)}}}},{key:"uploadFiles",value:function(e){e.preventDefault(),console.log(this.state.file)}},{key:"submit",value:function(e){var t=this;e.preventDefault();var a=localStorage.getItem("ulogovan"),n="Bearer ".concat(a);console.log(this.state.startDate),console.log(this.state.endDate);var l=this.markaValidation(this.state.marka);l=this.modelValidation(this.state.model)&&l,l=this.gorivoValidation(this.state.gorivo)&&l,l=this.klasaValidation(this.state.klasa)&&l,l=this.sjedisteValidation(this.state.brSjedista)&&l;var r=-1;if(this.state.unlimitedMileage?r=-1:(l=this.maxKilometrazaValidation(this.state.maxKilometraza)&&l,r=this.state.maxKilometraza),console.log(this.state.maxKilometraza),l=this.kilometrazaValidation(this.state.kilometraza)&&l,l=this.state.dodaoSlike&&l,l=this.mjenjacValidation(this.state.mjenjac)&&l,l=this.daLiJeDodao(this.state.dodaoSlike)&&l,l=this.cityValidation(this.state.city)&&l,l=this.startDateValidation(this.state.startDate)&&l,(l=this.endDateValidation(this.state.endDate)&&l)&&this.state.dodaoSlike){var o={carAd:{make:this.state.marka,model:this.state.model,fuel:this.state.gorivo,gearbox:this.state.mjenjac,carClass:this.state.klasa,insurance:this.state.collision,min_price:100,max_price:48e4,mileage:this.state.kilometraza,mileageLimit:r,kidsSeats:this.state.brSjedista,raiting:0,state:"shared",following:!1,following:this.state.following},city:this.state.city,startDate:this.state.startDate,endDate:this.state.endDate};C()({method:"post",url:te+"advertisement/advertisement/"+this.state.cjenovnikId,data:o,headers:{Authorization:n}}).then((function(e){console.log(e);var a=e.data.id;if(console.log(e.data.id),console.log(t.state.dodaoSlike),D.NotificationManager.success("Successfully added!","",3e3),!1!==t.state.dodaoSlike){for(var l=[],r=0;r<t.fileObj[0].length;r++)l.push(t.fileArray[r]);var o=te+"advertisement/image/"+a;C()({method:"post",url:o,data:t.lista,headers:{Authorization:n}}).then((function(e){console.log(e),t.reset()}),(function(e){console.log(e)}))}}),(function(e){console.log(e)}))}}},{key:"vratiFormu",value:function(e){this.setState({sakrij:!1,prikazAuto:!0,novoAuto:!0,drugiZahtjev:!1,file:[null],gorivo:this.state.codebook.filter((function(e){return"fuel"===e.codeType}))[0].name,mjenjac:this.state.codebook.filter((function(e){return"gearbox"===e.codeType}))[0].name,marka:this.state.codebook.filter((function(e){return"brand"===e.codeType}))[0].name,model:this.state.codebook.filter((function(e){return"model"===e.codeType}))[0].name,klasa:this.state.codebook.filter((function(e){return"class"===e.codeType}))[0].name,brSjedista:"",markaText:"",modelText:"",gorivoText:"",cityText:"",mjenjacText:"",klasaText:"",kilometraza:"",maxKilometara:"",maxKilometraza:"",startDate:"",endDate:"",oglasiText:"",collision:!1})}},{key:"vratiAuto",value:function(e){this.setState({sakrij:!0,prikazAuto:!1,dugmeAuto:!0,novoAuto:!0,drugiZahtjev:!0,oglasiText:""})}},{key:"reset",value:function(){var e=this,t=localStorage.getItem("ulogovan"),a="Bearer ".concat(t);C()({method:"get",url:te+"advertisement/pricelist",headers:{Authorization:a}}).then((function(t){200===t.status&&e.setState({cjenovnici:t.data,cjenovnikId:t.data[0].id,possible:!1})}),(function(t){console.log(t),e.setState({possible:!0})})),C()({method:"get",url:te+"advertisement/car",headers:{Authorization:a}}).then((function(t){200===t.status&&e.setState({cars:t.data,sakrij:!0,trenutniId:t.data[0].id})}),(function(t){e.setState({dugmeAuto:!1}),console.log(t)})),this.setState({file:[null],gorivo:this.state.codebook.filter((function(e){return"fuel"===e.codeType}))[0].name,mjenjac:this.state.codebook.filter((function(e){return"gearbox"===e.codeType}))[0].name,marka:this.state.codebook.filter((function(e){return"brand"===e.codeType}))[0].name,model:this.state.codebook.filter((function(e){return"model"===e.codeType}))[0].name,klasa:this.state.codebook.filter((function(e){return"class"===e.codeType}))[0].name,markaText:"",modelText:"",cityText:"",gorivoText:"",mjenjacText:"",klasaText:"",brSjedista:"",sjedisteText:"",kilometraza:"",kilometrazaText:"",maxKilometara:"",oglasiText:"",maxKilometraza:"",maxKilometrazaText:"",startDate:"",startDateText:"",endDate:"",endDateText:"",collision:!1,noviAuto:!0,cars:[],sakrij:!1,trenutniId:"",prikazAuto:!0,dugmeAuto:!1,novoAuto:!1,drugiZahtjev:!1,dodaoSlike:!1,slikeText:"",cjenovnikId:this.state.cjenovnici[0].id,city:"",unlimitedMileage:!1}),this.lista=[],C()({method:"get",url:te+"advertisement/car",headers:{Authorization:a}}).then((function(t){200!==t.status&&e.setState({dugmeAuto:!1})}),(function(e){console.log(e)}))}},{key:"daLiJeDodao",value:function(e){return!0!==e?this.setState({slikeText:"Obavezno dodajte fotografije"}):this.setState({slikeText:""}),e}},{key:"markaValidation",value:function(e){this.setState({marka:e});var t=e;return console.log("udje lii marka"),""===t?(this.setState({markaText:"Ovo polje ne moze biti prazno"}),!1):(this.setState({markaText:""}),!0)}},{key:"cityValidation",value:function(e){return e=(e=(e=(e=e.replace(/</g,"")).replace(/>/g,"")).replace(/script/g,"")).replace(/alert/g,""),this.setState({city:e}),""===e?(this.setState({cityText:"Ovo polje ne moze biti prazno"}),!1):(this.setState({cityText:""}),!0)}},{key:"autoValidation",value:function(e){console.log("udje lii auto"),this.setState({trenutni:e,sakrij:!0,novoAuto:!1,drugiZahtjev:!0,oglasiText:""}),console.log(this.state.sakrij),console.log({id:e})}},{key:"cjenovnikValidation",value:function(e,t){this.setState({cjenovnikId:e})}},{key:"modelValidation",value:function(e){return this.setState({model:e}),console.log("udje li model"),""===e?(this.setState({modelText:"Ovo polje ne moze biti prazno"}),!1):(this.setState({modelText:""}),!0)}},{key:"gorivoValidation",value:function(e){return console.log("udje lii gorivo"),console.log(e),this.setState({gorivo:e}),""===e?(this.setState({gorivoText:"Ovo polje ne moze biti prazno"}),!1):(this.setState({gorivoText:""}),!0)}},{key:"mjenjacValidation",value:function(e){return console.log("udje lii mjenjac"),this.setState({mjenjac:e}),""===e?(this.setState({mjenjacText:"Ovo polje ne moze biti prazno"}),!1):(this.setState({mjenjacText:""}),!0)}},{key:"klasaValidation",value:function(e){return this.setState({klasa:e}),""===e?(this.setState({klasaText:"Ovo polje ne moze biti prazno"}),!1):(this.setState({klasaText:""}),!0)}},{key:"sjedisteValidation",value:function(e){this.setState({brSjedista:e});var t=e;return""===t?(this.setState({sjedisteText:"Ovo polje ne moze biti prazno"}),!1):"-"===t||t<0?(this.setState({sjedisteText:"Broj sjedista mora biti pozitivan broj!"}),!1):t>7?(this.setState({sjedisteText:"Maksimalna broj sjedista je 7!"}),!1):(this.setState({sjedisteText:""}),!0)}},{key:"kilometrazaValidation",value:function(e){return this.setState({kilometraza:e}),""===e?(this.setState({kilometrazaText:"Ovo polje ne moze biti prazno"}),!1):(this.setState({kilometrazaText:""}),!0)}},{key:"maxKilometrazaValidation",value:function(e){return this.setState({maxKilometraza:e}),""===e?(this.setState({maxKilometrazaText:"Ovo polje ne moze biti prazno"}),!1):(this.setState({maxKilometrazaText:""}),!0)}},{key:"startDateValidation",value:function(e){var t,a,n;if(console.log(this.state.collision),this.setState({startDate:e}),""===e||void 0===e)return this.setState({startDateText:"Morate unijeti datum"}),!1;if(""!==e&&void 0!==e){t=e[0]+e[1]+e[2]+e[3],a=e[5]+e[6],n=e[8]+e[9];var l=new Date,r=parseInt(l.getDate()),o=parseInt(l.getMonth()+1),i=parseInt(l.getFullYear());return t=parseInt(t),a=parseInt(a),n=parseInt(n),void 0===e||""===e?(this.setState({startDateText:"Datum je obavezno polje"}),!1):t<i?(this.setState({startDateText:"Godina je prosla"}),!1):a<o&&t<=i?(this.setState({startDateText:"Mjesec je prosao"}),!1):n<r&&a<=o&&t<=i?(this.setState({startDateText:"Dan je prosao"}),!1):(this.setState({startDateText:""}),!0)}}},{key:"endDateValidation",value:function(e){this.setState({endDate:e});var t,a,n,l=this.state.startDate,r=e;if(""===e||void 0===e)return this.setState({startDateText:"Morate unijeti datum"}),!1;if(""!==e&&void 0!==e){t=e[0]+e[1]+e[2]+e[3],a=e[5]+e[6],n=e[8]+e[9];var o=new Date,i=parseInt(o.getDate()),s=parseInt(o.getMonth()+1),c=parseInt(o.getFullYear());return t=parseInt(t),a=parseInt(a),n=parseInt(n),void 0===e||""===e?(this.setState({endDateText:"Datum je obavezno polje"}),!1):t<c?(this.setState({endDateText:"Godina je prosla"}),!1):a<s&&t<=c?(this.setState({endDateText:"Mjesec je prosao"}),!1):n<i&&a<=s&&t<=c?(this.setState({endDateText:"Dan je prosao"}),!1):new Date(r)<=new Date(l)?(this.setState({endDateText:"Datum mora biti veci od pocetnog"}),!1):(this.setState({endDateText:""}),!0)}}},{key:"toggle",value:function(){this.setState({collapse:!this.state.collapse})}},{key:"toggleFade",value:function(){this.setState((function(e){return{fadeIn:!e}}))}},{key:"render",value:function(){var e=this,t=this.state.pricelists.length,a=Array.from(Array(Math.ceil(t/7)).keys()),n=c.a.createElement("div",{className:"content"},c.a.createElement("div",{className:"animated fadeIn"},c.a.createElement(y.a,{hidden:this.state.cadAdd},c.a.createElement(S.a,{xs:"12",md:"8"},c.a.createElement(O.a,null,c.a.createElement(M.a,null,c.a.createElement("strong",null,"Dodavanje novog oglasa")),c.a.createElement(M.a,{hidden:!this.state.possible},c.a.createElement("strong",null,"Ne postoji nijedan cjenonvik u sistemu")),c.a.createElement(R.a,{hidden:this.state.possible},c.a.createElement(F.a,{action:"",method:"post",encType:"multipart/form-data",className:"form-horizontal"},c.a.createElement(y.a,null,c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"text-input"},"Marka")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"select",name:"selectBrand",onChange:function(t){return e.markaValidation(t.target.value)}},this.state.codebook.filter((function(e){return"brand"===e.codeType})).map((function(e){return c.a.createElement("option",{key:e.name,value:e.name}," ",e.name)}))),c.a.createElement(H.a,{color:"danger"},this.state.markaText)))),c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"email-input"},"Model")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"select",name:"selectModel",onChange:function(t){return e.modelValidation(t.target.value)}},this.state.codebook.filter((function(e){return"model"===e.codeType})).map((function(e){return c.a.createElement("option",{key:e.name,value:e.name}," ",e.name)}))),"                          ",c.a.createElement(H.a,{color:"danger"},this.state.modelText))))),c.a.createElement(y.a,null,c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"password-input"},"Vrsta goriva")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"select",name:"selectFuel",onChange:function(t){return e.gorivoValidation(t.target.value)}},this.state.codebook.filter((function(e){return"fuel"===e.codeType})).map((function(e){return c.a.createElement("option",{key:e.name,value:e.name}," ",e.name)}))),"                          ",c.a.createElement(H.a,{color:"danger"},this.state.gorivoText)))),c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,null,"Tip mjenjaca")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"select",name:"selectGearbox",onChange:function(t){return e.mjenjacValidation(t.target.value)}},this.state.codebook.filter((function(e){return"gearbox"===e.codeType})).map((function(e){return c.a.createElement("option",{key:e.name,value:e.name}," ",e.name)}))),c.a.createElement(H.a,{color:"danger"},this.state.mjenjacText))))),c.a.createElement(y.a,null,c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,null,"Klasa automobila")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"select",name:"selectClass",onChange:function(t){return e.klasaValidation(t.target.value)}},this.state.codebook.filter((function(e){return"class"===e.codeType})).map((function(e){return c.a.createElement("option",{key:e.name,value:e.name}," ",e.name)}))),c.a.createElement(H.a,{color:"danger"},this.state.klasaText)))),c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,null,"Kids seats")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"number",id:"date-input",value:this.state.brSjedista,onChange:function(t){return e.sjedisteValidation(t.target.value)},name:"date-input",placeholder:"broj sjedista"}),c.a.createElement(H.a,{color:"danger"},this.state.sjedisteText))))),c.a.createElement(y.a,null,c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"password-input"},"Kilometraza")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"number",value:this.state.kilometraza,id:"password-input",onChange:function(t){return e.kilometrazaValidation(t.target.value)},name:"password-input",placeholder:"predjeni kilometri",autoComplete:"new-password"}),c.a.createElement(H.a,{color:"danger"},this.state.kilometrazaText)))),c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"password-input"},"Max kilometara")),c.a.createElement(S.a,{md:"5"},c.a.createElement(B.a,{disabled:this.state.unlimitedMileage,type:"number",id:"date-input",value:this.state.maxKilometraza,onChange:function(t){return e.maxKilometrazaValidation(t.target.value)},name:"date-input",placeholder:"max kilometara"}),c.a.createElement(H.a,{color:"danger"},this.state.maxKilometrazaText)),c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,null,"Unlimited")),c.a.createElement(S.a,{md:"1"},c.a.createElement(B.a,{type:"checkbox",id:"unlimitedMileage",value:this.state.unlimitedMileage,onChange:function(t){return e.setState({unlimitedMileage:!e.state.unlimitedMileage})}},"Unlimited"))))),c.a.createElement(y.a,{md:"3"},c.a.createElement(S.a,{md:"6"},c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,null,"City")),c.a.createElement(S.a,{md:"9"},c.a.createElement(B.a,{type:"text",name:"city",value:this.state.city,onChange:function(t){return e.cityValidation(t.target.value)},placeholder:"Pick up location"}),c.a.createElement(H.a,{color:"danger"},this.state.cityText))))),c.a.createElement(y.a,{md:"3"},c.a.createElement("strong",null," Period vazenja oglasa: ")),c.a.createElement("br",null),c.a.createElement(y.a,null,c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"password-input"},"Od")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"date",id:"password-input",value:this.state.startDate,onChange:function(t){return e.startDateValidation(t.target.value)},name:"password-input",placeholder:"od",autoComplete:"new-password"}),c.a.createElement(H.a,{color:"danger"},this.state.startDateText)))),c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"password-input"},"Do")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"date",id:"date-input",value:this.state.endDate,onChange:function(t){return e.endDateValidation(t.target.value)},name:"date-input",placeholder:"do"}),c.a.createElement(H.a,{color:"danger"},this.state.endDateText))))),c.a.createElement(y.a,null,c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"select"},"Izaberite cjenovnik")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{disabled:!0,type:"select",value:this.state.cjenovnikId,onChange:function(t){e.cjenovnikValidation(t.target.value)}},this.state.cjenovnici.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},"Po danu:",e.priceDay," DC:",e.collisionDW," Popust na 20 dana:",e.discount20,"% Popust na 30 dana:",e.discount30,"%  ")}))))))),c.a.createElement(y.a,{md:"24"},c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"9"},c.a.createElement(Y.a,null,"Collision Damage Waiver")),c.a.createElement(S.a,{md:"9"},c.a.createElement(B.a,{style:{marginLeft:"5rem"},type:"checkbox",onChange:this.collisionValidation,checked:this.state.collision,name:"collision",value:"collision"}),c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{check:!0,className:"form-check-label",htmlFor:"checkbox1"},"Yes "))))),c.a.createElement(S.a,{md:"6"},c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"6"},c.a.createElement(Y.a,null,"Tracking device")),c.a.createElement(S.a,{md:"9"},c.a.createElement(B.a,{style:{marginLeft:"5rem"},type:"checkbox",onChange:function(t){return e.setState({following:!e.state.following})},checked:this.state.following,name:"following",value:"following"}),c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{check:!0,className:"form-check-label",htmlFor:"checkbox1"},"Yes")))))),c.a.createElement(L.a,null,c.a.createElement(y.a,{md:"3"},c.a.createElement("strong",null," Fotografije ")),c.a.createElement("br",null),c.a.createElement("div",{className:"form-group multi-preview"},(this.fileArray||[]).map((function(e){return c.a.createElement("img",{src:e,alt:"...",style:{width:100,height:50}})}))),c.a.createElement(H.a,{color:"danger"},this.state.slikeText)),c.a.createElement("input",{type:"file",accept:"image/png,image/jpeg",onChange:this.uploadMultipleFiles,multiple:!0}),c.a.createElement(L.a,{row:!0,hidden:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{className:"custom-file",htmlFor:"custom-file-input"},"Custom file input")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(Y.a,{className:"custom-file"},c.a.createElement(B.a,{className:"custom-file",type:"file",id:"custom-file-input",name:"file-input"}),c.a.createElement("span",{className:"custom-file-control"})))))),c.a.createElement(V.a,null,c.a.createElement(H.a,{color:"danger"},this.state.oglasiText),c.a.createElement(P.a,{hidden:this.state.possible,type:"submit",size:"sm",color:"primary",onClick:function(t){return e.submit(t)}},c.a.createElement("i",{className:"fa fa-dot-circle-o"})," Postavi"),c.a.createElement(P.a,{hidden:this.state.possible,type:"reset",size:"sm",color:"danger",onClick:function(t){return e.reset()}},c.a.createElement("i",{className:"fa fa-ban"})," Ponisti")))),c.a.createElement(S.a,{xs:"12",md:"12",hidden:this.state.hideForm},c.a.createElement(O.a,null,c.a.createElement(M.a,null,c.a.createElement("strong",null,"Pricelists")),c.a.createElement(R.a,null,c.a.createElement("div",null,c.a.createElement("section",{className:"bar pt-0"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-12"},c.a.createElement("div",{className:"box mt-0 mb-lg-0"},c.a.createElement("div",{className:"table-responsive"},c.a.createElement("table",{className:"table table-hover"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{className:"text-primary font-weight-bold"},"Day price"),c.a.createElement("th",{className:"text-primary font-weight-bold"},"Collision DW"),c.a.createElement("th",{className:"text-primary font-weight-bold"},"Discount 20 days"),c.a.createElement("th",{className:"text-primary font-weight-bold"},"Discount 30 days"),c.a.createElement("th",{className:"text-primary font-weight-bold"},"Exceed mileage"))),c.a.createElement("tbody",null,this.state.showpricelist.map((function(t){return c.a.createElement("tr",{key:t.id},c.a.createElement("td",null,t.priceDay," RSD"),c.a.createElement("td",null,t.collisionDW," RSD"),c.a.createElement("td",null,t.discount20," %"),c.a.createElement("td",null,t.discount30," %"),c.a.createElement("td",null,t.exceedMileage," RSD"),c.a.createElement("td",null,c.a.createElement(P.a,{block:!0,className:"btn-round",color:"info",onClick:function(a){return e.cjenovnikValidation(t.id,a)}},"Select")))}))))))))))),c.a.createElement(V.a,null,c.a.createElement("nav",null,c.a.createElement(J.a,null,c.a.createElement(X.a,null,c.a.createElement($.a,{disabled:1===this.state.activePage,previous:!0,tag:"button",onClick:function(t){return e.handlePageChange(e.state.activePage-1)}})),a.map((function(t){return c.a.createElement("div",null,c.a.createElement(X.a,{active:!0,hidden:e.state.activePage!==t+1},c.a.createElement($.a,{tag:"button"},t+1)),c.a.createElement(X.a,{hidden:e.state.activePage===t+1},c.a.createElement($.a,{tag:"button",onClick:function(a){return e.handlePageChange(t+1)}},t+1)))})),c.a.createElement(X.a,null,c.a.createElement($.a,{disabled:this.state.activePage===Math.ceil(t/7),next:!0,tag:"button",onClick:function(t){return e.handlePageChange(e.state.activePage+1)}}))))))))),c.a.createElement(D.NotificationContainer,null));return this.rolesMatched()?n:c.a.createElement(d.a,{to:"/ads"})}}]),a}(k.RoleAwareComponent),ne=a(245),le=a(131),re=a(224),oe=a(233),ie=a(246),se=a(175),ce=a(225),me=a(123),de=a(81),ue=a(215),he=a(205),ge=a(204),pe=a(126),Ee=a.n(pe),fe=a(546),ve=(a(507),Object(fe.b)(fe.a)),be=Object(fe.b)(fe.c),ye="https://localhost:8082/",Se=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var l;return Object(n.a)(this,a),(l=t.call(this,e)).fillCustomers=function(e){C()({method:"get",url:ye+"authpoint/user/customers",headers:{Authorization:e}}).then((function(e){404!==e.status&&l.setState({customers:e.data})}),(function(e){console.log(e)}))},l.manualRequest=function(e){if(e.preventDefault(),l.validateFields()){var t=localStorage.getItem("ulogovan"),a="Bearer ".concat(t),n=!0;n=l.startDateValidationModal,n=l.endDateValidationModal&&n;var r=l.state.manualStartDate,o=l.state.manualEndDate,i=l.state.manualId,s=l.state.manualCustomerName,c=l.state.manualCustomerEmail,m=l.state.manualCustomerSurname,d=l.state.manualCustomerUsername,u=l.state.shouldRegister,h=[];h.push(u),h.push(s),h.push(c),h.push(m),h.push(d),n?(console.log("ok"),C()({method:"post",url:ye+"orders/request/"+i+"/"+r+"/"+o,headers:{Authorization:a},data:h}).then((function(e){e.data?D.NotificationManager.success("Manual reservation successful!","",3e3):D.NotificationManager.error("These days are already booked. Try to change dates.","",3e3),l.clearAll()}),(function(e){console.log(e)})),l.setState({startDateDisable:"",endDateDisable:"",manualStartDate:"",manualEndDate:"",showModal:!1})):console.log("false")}else D.NotificationManager.error("All fields are required","",3e3)},l.CustomerEmailValidation=function(e){/\S+@\S+\.\S+/.test(e.target.value)?l.setState({formValid:!1,CustomerEmailMessage:""}):l.setState({formValid:!0,CustomerEmailMessage:"Expected input: local@domain."})},l.CustomerNameValidation=function(e){/[a-zA-Z]+/.test(e.target.value)?l.setState({formValid:!1,manualCustomerTextMessage:""}):l.setState({formValid:!0,manualCustomerTextMessage:"Only letters allowed"})},l.validateFields=function(e){return!l.state.shouldRegister||""!==l.state.manualCustomerEmail&&""!==l.state.manualCustomerName&&""!==l.state.manualCustomerSurname&&""!==l.state.manualCustomerUsername?(l.setState({formErrorText:""}),!0):(l.setState({formErrorText:"All fields are required."}),!1)},l.search=function(){var e=l.startDateValidation(l.state.startDate);if(e=l.endDateValidation(l.state.endDate)&&e,e=l.startTimeValidation(l.state.startTime)&&e,e=l.endTimeValidation(l.state.endTime)&&e,e=l.cityValidation(l.state.city)&&e){var t=localStorage.getItem("ulogovan"),a="Bearer ".concat(t);C()({method:"post",url:ye+"orders/request/available",headers:{Authorization:a}}).then((function(e){var t=new Date(l.state.startDate),n=l.state.startTime.split(":");t.setHours(n[0],n[1],0,0),t=t.getTime(),localStorage.setItem("start",t);var r=new Date(l.state.endDate),o=l.state.endTime.split(":");r.setHours(o[0],o[1],0,0),r=r.getTime(),localStorage.setItem("end",r);var i=l.state.city;C()({method:"get",url:ye+"/advertisement/advertisement/search",params:{startDate:t,endDate:r,city:i},headers:{Authorization:a}}).then((function(e){var t=e.data.map((function(e){return e.pricelist.priceDay})),a=Math.max.apply(Math,Object(ne.a)(t)),n=e.data.map((function(e){return e.carAd.mileage})),r=Math.max.apply(Math,Object(ne.a)(n)),o=e.data.map((function(e){return e.carAd.kidsSeats})),i=Math.max.apply(Math,Object(ne.a)(o)),s=e.data.map((function(e){return e.carAd.mileageLimit})),c=Math.max.apply(Math,Object(ne.a)(s)),m=e.data;m.sort((function(e,t){return e.carAd.price-t.carAd.price})),l.setState({adsSearch:m,adsFiltered:m,hideSearch:!0,hideAll:!0,maxPrice:a,selectedPrice:[0,a],maxMileage:r,selectedMileage:r,maxKids:i,selectedKids:0,maxMileageLimit:c,selectedMileageLimit:c,unlimitedMileage:!1,damageWaiver:!1,selectedSort:"Price"}),l.getCodebook(),l.setState({hideBasket:!("ROLE_CUSTOMER"===localStorage.getItem("role"))}),0===e.data.length&&(D.NotificationManager.info("There are no available cars for the selected parameters","",3e3),l.setState({hideSearch:!1}))}),(function(e){console.log(e)}))}),(function(e){console.log(e)}))}},l.apply=function(){var e=l.state.adsSearch;l.state.selectedCodes[0].length>0&&(e=e.filter((function(e){return l.state.selectedCodes[0].includes(e.carAd.make)}))),l.state.selectedCodes[1].length>0&&(e=e.filter((function(e){return l.state.selectedCodes[1].includes(e.carAd.model)}))),l.state.selectedCodes[2].length>0&&(e=e.filter((function(e){return l.state.selectedCodes[2].includes(e.carAd.fuel)}))),l.state.selectedCodes[3].length>0&&(e=e.filter((function(e){return l.state.selectedCodes[3].includes(e.carAd.gearbox)}))),l.state.selectedCodes[4].length>0&&(e=e.filter((function(e){return l.state.selectedCodes[4].includes(e.carAd.carClass)}))),e=(e=(e=e.filter((function(e){return e.pricelist.priceDay<=l.state.selectedPrice[1]&&e.pricelist.priceDay>=l.state.selectedPrice[0]}))).filter((function(e){return e.carAd.mileage<=l.state.selectedMileage}))).filter((function(e){return e.carAd.kidsSeats>=l.state.selectedKids})),e=l.state.unlimitedMileage?e.filter((function(e){return-1===e.carAd.mileageLimit})):e.filter((function(e){return e.carAd.mileageLimit<=l.state.selectedMileageLimit})),l.state.damageWaiver&&(e=e.filter((function(e){return e.carAd.insurance}))),"Price"===l.state.selectedSort?e.sort((function(e,t){return e.carAd.price-t.carAd.price})):"Mileage"===l.state.selectedSort?e.sort((function(e,t){return e.carAd.mileage-t.carAd.mileage})):"Rating"===l.state.selectedSort&&e.sort((function(e,t){return t.carAd.raiting-e.carAd.raiting})),l.setState({adsFiltered:e}),l.toggle()},l.clearAll=function(){l.setState({selectedCodes:[[],[],[],[],[]],selectedPrice:[0,l.state.maxPrice],damageWaiver:!1,selectedSort:"Price",selectedKids:0,selectedMileage:l.state.maxMileage,unlimitedMileage:!1,selectedMileageLimit:l.state.maxMileageLimit,shouldRegister:!1,customers:[],hideRegModal:!0,manualCustomerUsername:"",manualCustomerEmail:"",manualCustomerName:"",manualCustomerSurname:"",manualCustomerEmailMessage:"",manualCustomerTextMessage:"",formErrorText:""})},l.addToBasket=function(e){var t=localStorage.getItem("ulogovan"),a="Bearer ".concat(t),n=!0;C()({method:"post",url:ye+"orders/request/"+e,headers:{Authorization:a}}).then((function(t){if(t.data)n=!1,D.NotificationManager.info("You have already created order for this car!","",3e3);else{for(var a=JSON.parse(sessionStorage.getItem("basket"))||[],l=0;l<a.length;l++)if(a[l]===e){D.NotificationManager.error("Item already in basket!","",3e3),n=!1;break}n&&(a.push(e),console.log(a),sessionStorage.setItem("basket",JSON.stringify(a)),D.NotificationManager.success("Item successfully added!","",3e3))}}),(function(e){console.log(e)}))},l.state={oglasi:[],accordion:[!1],city:"",startDate:"",endDate:"",startTime:"",endTime:"",adsSearch:[],adsFiltered:[],startDateError:"",endDateError:"",startTimeError:"",endTimeError:"",cityError:"",hideSearch:!1,hideAll:!1,dropdownOpen:!1,codebook:[[],[],[],[],[]],selectedCodes:[[],[],[],[],[]],header:["Car brands","Car models","Fuel types","Gearbox types","Car type"],hideBasket:!0,selectedPrice:[0,0],maxPrice:0,maxMileage:0,selectedMileage:0,maxKids:7,selectedKids:0,unlimitedMileage:!1,maxMileageLimit:0,mileageLimit:0,damageWaiver:!1,isOpenSort:!1,selectedSort:"Price",manualStartDate:"",manualEndDate:"",startDateDisable:"",endDateDisable:"",showModal:!1,agentUsername:"",shouldRegister:!1,customers:[],hideRegModal:!0,manualCustomerUsername:"",manualCustomerEmail:"",manualCustomerName:"",manualCustomerSurname:"",manualCustomerEmailMessage:"",manualCustomerTextMessage:"",formErrorText:"",manualId:0},l.saznajVise=l.saznajVise.bind(Object(r.a)(l)),l.toggleAccordion=l.toggleAccordion.bind(Object(r.a)(l)),l.startDateValidation=l.startDateValidation.bind(Object(r.a)(l)),l.endDateValidation=l.endDateValidation.bind(Object(r.a)(l)),l.startTimeValidation=l.startTimeValidation.bind(Object(r.a)(l)),l.endTimeValidation=l.endTimeValidation.bind(Object(r.a)(l)),l.cityValidation=l.cityValidation.bind(Object(r.a)(l)),l.search=l.search.bind(Object(r.a)(l)),l.apply=l.apply.bind(Object(r.a)(l)),l.getDateString=l.getDateString.bind(Object(r.a)(l)),l.getCodebook=l.getCodebook.bind(Object(r.a)(l)),l.toggleCheckbox=l.toggleCheckbox.bind(Object(r.a)(l)),l.renderCheckboxes=l.renderCheckboxes.bind(Object(r.a)(l)),l.clearAll=l.clearAll.bind(Object(r.a)(l)),l.startDateValidationModal=l.startDateValidationModal.bind(Object(r.a)(l)),l.endDateValidationModal=l.endDateValidationModal.bind(Object(r.a)(l)),l.manualRequest=l.manualRequest.bind(Object(r.a)(l)),l.fillCustomers=l.fillCustomers.bind(Object(r.a)(l)),l.CustomerEmailValidation=l.CustomerEmailValidation.bind(Object(r.a)(l)),l.CustomerNameValidation=l.CustomerNameValidation.bind(Object(r.a)(l)),l.validateFields=l.validateFields.bind(Object(r.a)(l)),l}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("ulogovan"),a="Bearer ".concat(t);C()({method:"get",url:ye+"advertisement/advertisement",headers:{Authorization:a}}).then((function(t){404!==t.status&&e.setState({oglasi:t.data})}),(function(e){console.log(e)})),this.getCodebook()}},{key:"openModal",value:function(e){var t=localStorage.getItem("ulogovan"),a="Bearer ".concat(t);this.fillCustomers(a);var n=new Date(e.startDate),l=n.getMonth()+1,r=n.getDate();l<10&&(l="0"+l),n.getDate()<10&&(r="0"+n.getDate());var o=n.getFullYear()+"-"+l+"-"+r;this.setState({manualStartDate:o}),this.setState({startDateDisable:o}),l=(n=new Date(e.endDate)).getMonth()+1,r=n.getDate(),l<10&&(l="0"+l),n.getDate()<10&&(r="0"+n.getDate()),o=n.getFullYear()+"-"+l+"-"+r,this.setState({manualEndDate:o,manualId:e.carAd.id}),this.setState({endDateDisable:o}),this.setState({showModal:!0})}},{key:"startDateValidationModal",value:function(e){var t,a,n;if(this.setState({manualStartDate:e}),""!==e&&void 0!==e){t=e[0]+e[1]+e[2]+e[3],a=e[5]+e[6],n=e[8]+e[9];var l=new Date,r=parseInt(l.getDate()),o=parseInt(l.getMonth()+1),i=parseInt(l.getFullYear());if(t=parseInt(t),a=parseInt(a),n=parseInt(n),t<i)return this.setState({textStartManualValidation:"Godina je prosla"}),!1;if(a<o&&t<=i)return this.setState({textStartManualValidation:"Mjesec je prosao"}),!1;if(n<r&&a<=o&&t<=i)return this.setState({textStartManualValidation:"Dan je prosao"}),!1;if(e<this.state.startDateDisable||e>this.state.endDateDisable)this.setState({textStartManualValidation:"Nije u odgovarajucem periodu"});else if(e>this.state.manualEndDate)this.setState({textStartManualValidation:"Mora biti manji od krajnjeg!"});else{if(!(e<this.state.startDateDisable))return this.setState({textStartManualValidation:""}),!0;this.setState({textStartManualValidation:"Nije u odgovarajucem periodu!"})}}}},{key:"endDateValidationModal",value:function(e){var t,a,n;if(this.setState({manualEndDate:e}),""!==e&&void 0!==e){t=e[0]+e[1]+e[2]+e[3],a=e[5]+e[6],n=e[8]+e[9];var l=new Date,r=parseInt(l.getDate()),o=parseInt(l.getMonth()+1),i=parseInt(l.getFullYear());if(t=parseInt(t),a=parseInt(a),n=parseInt(n),t<i)return this.setState({textEndManualValidation:"Godina je prosla"}),!1;if(a<o&&t<=i)return this.setState({textEndManualValidation:"Mjesec je prosao"}),!1;if(n<r&&a<=o&&t<=i)return this.setState({textEndManualValidation:"Dan je prosao"}),!1;if(e<this.state.startDateDisable||e>this.state.endDateDisable)this.setState({textEndManualValidation:"Nije u odgovarajucem periodu"});else if(e<this.state.manualStartDate)this.setState({textEndManualValidation:"Mora biti veci od pocetnog!"});else{if(!(e>this.state.endDateDisable))return this.setState({textEndManualValidation:""}),!0;this.setState({textEndManualValidation:"Nije u odgovarajucem periodu!"})}}}},{key:"toggle",value:function(){this.setState({dropdownOpen:!this.state.dropdownOpen})}},{key:"toggle2",value:function(){this.setState({isOpenSort:!this.state.isOpenSort})}},{key:"toggleAccordion",value:function(e){var t=this.state.accordion.map((function(t,a){return e===a&&!t}));this.setState({accordion:t})}},{key:"saznajVise",value:function(e){this.props.history.push("showAd/"+e)}},{key:"startDateValidation",value:function(e){if(""===e)return this.setState({startDateError:"This field can't be empty"}),!1;this.setState({startDate:e}),e=new Date(e);var t=new Date;if(""!==this.state.startTime){var a=this.state.startTime.split(":");e.setHours(a[0],a[1],0,0)}else e.setHours(0,0,0,0),t.setHours(0,0,0,0);return e.setDate(e.getDate()-2),e>=t?(this.setState({startDateError:""}),!0):(this.setState({startDateError:"You can't pick up car in less than 48h from now"}),!1)}},{key:"endDateValidation",value:function(e){if(this.setState({endDate:e}),""===e)return this.setState({endDateError:"This field can't be empty"}),!1;if((e=new Date(e)).setHours(0,0,0,0),""!==this.state.startDate&&""!==this.state.startTime&&""!==this.state.endTime){var t=new Date(this.state.startDate),a=this.state.startTime.split(":");t.setHours(a[0],a[1],0,0);var n=this.state.endTime.split(":");return e.setHours(n[0],n[1],0,0),e<t?(this.setState({endDateError:"Drop off date can't be before pick up date"}),!1):(this.setState({endDateError:""}),!0)}return this.setState({endDateError:""}),!0}},{key:"startTimeValidation",value:function(e){return this.setState({startTime:e}),""===e?(this.setState({startTimeError:"This field can't be empty"}),!1):(this.setState({startTimeError:""}),!0)}},{key:"endTimeValidation",value:function(e){return this.setState({endTime:e}),""===e?(this.setState({endTimeError:"This field can't be empty"}),!1):(this.setState({endTimeError:""}),!0)}},{key:"cityValidation",value:function(e){return e=(e=(e=(e=e.replace(/</g,"")).replace(/>/g,"")).replace(/script/g,"")).replace(/alert/g,""),this.setState({city:e}),""===e?(this.setState({cityError:"This field can't be empty"}),!1):(this.setState({cityError:""}),!0)}},{key:"getDateString",value:function(e){var t=new Date(e),a=t.getMonth()+1,n=t.getDate()+"."+a+"."+t.getFullYear()+", ",l=t.getHours(),r=t.getMinutes();return l<10&&(l="0"+l),r<10&&(r="0"+r),n=n+l+":"+r}},{key:"getDateTime",value:function(e,t){var a=new Date(e),n=t.split(":");return a.setHours(n[0],n[1],0,0),a}},{key:"getCodebook",value:function(){var e=this,t=localStorage.getItem("ulogovan"),a="Bearer ".concat(t);C()({method:"get",url:ye+"advertisement/codebook",headers:{Authorization:a}}).then((function(t){200===t.status&&e.setState({codebook:[t.data.filter((function(e){return"brand"===e.codeType})),t.data.filter((function(e){return"model"===e.codeType})),t.data.filter((function(e){return"fuel"===e.codeType})),t.data.filter((function(e){return"gearbox"===e.codeType})),t.data.filter((function(e){return"class"===e.codeType}))]})}),(function(e){console.log(e)}))}},{key:"renderCheckboxes",value:function(e){var t=this;return c.a.createElement(c.a.Fragment,null,c.a.createElement(S.a,{md:"2"},c.a.createElement("h6",null,this.state.header[e]),c.a.createElement(re.a,null,this.state.codebook[e].map((function(a){return c.a.createElement(oe.a,{key:a.id,className:"list-group-item"},c.a.createElement(Y.a,null,"\xa0\xa0",c.a.createElement(B.a,{type:"checkbox",onChange:function(a){return t.toggleCheckbox(e,a.target.value)},value:a.name,checked:t.state.selectedCodes[e].includes(a.name)}),a.name))})))))}},{key:"toggleCheckbox",value:function(e,t){var a=this.state.selectedCodes,n=a[e].indexOf(t);n>-1?a[e].splice(n,1):a[e].push(t),this.setState({selectedCodes:a})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"content"},c.a.createElement(ie.a,{className:"modal-register",isOpen:this.state.showModal},c.a.createElement("div",{className:"modal-header no-border-header text-center"},c.a.createElement("button",{"aria-label":"Close",className:"close","data-dismiss":"modal",type:"button",onClick:function(t){return e.setState({showModal:!1,shouldRegister:!1,hideRegModal:!0,manualCustomerUsername:"",manualCustomerEmail:"",manualCustomerName:"",manualCustomerSurname:"",manualCustomerEmailMessage:"",manualCustomerTextMessage:"",formErrorText:""})}},c.a.createElement("span",{"aria-hidden":!0},"x"))),c.a.createElement("div",{className:"modal-body size-md-24"},c.a.createElement(F.a,{onSubmit:this.manualRequest},c.a.createElement(y.a,{form:!0},c.a.createElement(S.a,{md:"6"},c.a.createElement(L.a,null,c.a.createElement(Y.a,null,"From:"),c.a.createElement(B.a,{type:"date",className:"form-control",value:this.state.manualStartDate,onChange:function(t){return e.startDateValidationModal(t.target.value)}}),c.a.createElement("p",{style:{color:"red"}}," ",this.state.textStartManualValidation," "))),c.a.createElement(S.a,{md:"6"},c.a.createElement(L.a,null,c.a.createElement(Y.a,null,"Until:"),c.a.createElement(B.a,{type:"date",className:"form-control",value:this.state.manualEndDate,onChange:function(t){return e.endDateValidationModal(t.target.value)}}),c.a.createElement("p",{style:{color:"red"}}," ",this.state.textEndManualValidation," ")))),c.a.createElement(L.a,{hidden:!this.state.hideRegModal},c.a.createElement(Y.a,null,"Choose customer:"),c.a.createElement(B.a,{type:"select",name:"customers",onChange:function(t){return e.setState({manualCustomerUsername:t.target.value})}},this.state.customers.map((function(e){return c.a.createElement("option",{key:e,value:e}," ",e)})))),c.a.createElement(L.a,{hidden:this.state.hideRegModal},c.a.createElement(Y.a,null,"Username:"),c.a.createElement(B.a,{type:"text",className:"form-control",value:this.state.manualCustomerUsername,onChange:function(t){return e.setState({manualCustomerUsername:t.target.value})}})),c.a.createElement(L.a,{hidden:this.state.hideRegModal},c.a.createElement(Y.a,null,"Email:"),c.a.createElement(B.a,{type:"text",className:"form-control",value:this.state.manualCustomerEmail,onChange:function(t){return e.setState({manualCustomerEmail:t.target.value})},onBlur:this.CustomerEmailValidation}),c.a.createElement("p",{style:{color:"red"}}," ",this.state.CustomerEmailMessage," ")),c.a.createElement(y.a,{form:!0,hidden:this.state.hideRegModal},c.a.createElement(S.a,{md:"6"},c.a.createElement(L.a,null,c.a.createElement(Y.a,null,"Name:"),c.a.createElement(B.a,{type:"text",className:"form-control",value:this.state.manualCustomerName,onChange:function(t){return e.setState({manualCustomerName:t.target.value})},onBlur:this.CustomerNameValidation}),c.a.createElement("p",{style:{color:"red"}}," ",this.state.manualCustomerTextMessage," "))),c.a.createElement(S.a,{md:"6"},c.a.createElement(L.a,null,c.a.createElement(Y.a,null,"Surname:"),c.a.createElement(B.a,{type:"text",className:"form-control",value:this.state.manualCustomerSurname,onChange:function(t){return e.setState({manualCustomerSurname:t.target.value})},onBlur:this.CustomerNameValidation}),c.a.createElement("p",{style:{color:"red"}}," ",this.state.manualCustomerTextMessage," ")))),c.a.createElement(P.a,{block:!0,color:"link",onClick:function(t){return e.setState({hideRegModal:!e.state.hideRegModal,shouldRegister:!e.state.shouldRegister})}},"Customer not found? Register him."),c.a.createElement(P.a,{block:!0,className:"btn-round",color:"info"},"Confirm")),c.a.createElement("p",{style:{color:"red"}}," ",this.state.formErrorText," "))),c.a.createElement(y.a,{hidden:this.state.hideSearch},c.a.createElement(S.a,{xs:"12",md:"12",sm:"12"},c.a.createElement(O.a,null,c.a.createElement(M.a,null,c.a.createElement(P.a,{block:!0,color:"info",className:"text-center m-0 p-0",onClick:function(){return e.toggleAccordion(0)},"aria-expanded":this.state.accordion[0],"aria-controls":"collapseOne"},c.a.createElement("h5",{className:"m-0 p-0"},"Start your search here")),"              "),c.a.createElement(f.a,{isOpen:this.state.accordion[0],"data-parent":"#accordion",id:"collapseOne","aria-labelledby":"headingOne"},c.a.createElement(R.a,null,c.a.createElement(y.a,null,c.a.createElement(S.a,{md:"3",xs:"3",sm:"3"},c.a.createElement(L.a,null,c.a.createElement(Y.a,null,"Pick up date"),c.a.createElement(se.a,null,c.a.createElement(ce.a,{addonType:"prepend"},c.a.createElement(me.a,null,c.a.createElement("i",{className:"fa fa-calendar"}))),c.a.createElement(B.a,{type:"date",name:"startDate",onChange:function(t){return e.startDateValidation(t.target.value)},placeholder:"Pick up date"})),c.a.createElement(H.a,{color:"danger"},this.state.startDateError))),c.a.createElement(S.a,{md:"3",xs:"3",sm:"3"},c.a.createElement(L.a,null,c.a.createElement(Y.a,null,"Pick up time"),c.a.createElement(se.a,null,c.a.createElement(ce.a,{addonType:"prepend"},c.a.createElement(me.a,null,c.a.createElement("i",{className:"fa fa-clock-o"}))),c.a.createElement(B.a,{type:"time",name:"startTime",onChange:function(t){return e.startTimeValidation(t.target.value)},placeholder:"Pick up time"})),c.a.createElement(H.a,{color:"danger"},this.state.startTimeError))),c.a.createElement(S.a,{md:"3",xs:"3",sm:"3"},c.a.createElement(L.a,null,c.a.createElement(Y.a,null,"Drop off date"),c.a.createElement(se.a,null,c.a.createElement(ce.a,{addonType:"prepend"},c.a.createElement(me.a,null,c.a.createElement("i",{className:"fa fa-calendar-check-o"}))),c.a.createElement(B.a,{type:"date",name:"endDate",onChange:function(t){return e.endDateValidation(t.target.value)},placeholder:"Drop off date"})),c.a.createElement(H.a,{color:"danger"},this.state.endDateError))),c.a.createElement(S.a,{md:"3",xs:"3",sm:"3"},c.a.createElement(L.a,null,c.a.createElement(Y.a,null,"Drop off time"),c.a.createElement(se.a,null,c.a.createElement(ce.a,{addonType:"prepend"},c.a.createElement(me.a,null,c.a.createElement("i",{className:"fa fa-clock-o"}))),c.a.createElement(B.a,{type:"time",name:"endTime",onChange:function(t){return e.endTimeValidation(t.target.value)},placeholder:"Drop off time"})),c.a.createElement(H.a,{color:"danger"},this.state.endTimeError)))),c.a.createElement(y.a,null,c.a.createElement(S.a,{md:"6",xs:"6",sm:"6"},c.a.createElement(L.a,null,c.a.createElement(Y.a,null,"City"),c.a.createElement(se.a,null,c.a.createElement(ce.a,{addonType:"prepend"},c.a.createElement(me.a,null,c.a.createElement("i",{className:"icon-location-pin icons"}))),c.a.createElement(B.a,{type:"text",name:"city",onChange:function(t){return e.cityValidation(t.target.value)},placeholder:"Pick up and drop off"})),c.a.createElement(H.a,{color:"danger"},this.state.cityError))),c.a.createElement(S.a,{md:"3",xs:"3",sm:"3"},c.a.createElement(L.a,{row:!0},c.a.createElement(Y.a,null,"\xa0"),c.a.createElement(se.a,null,c.a.createElement(P.a,{type:"button",color:"primary",onClick:function(t){return e.search()}},c.a.createElement("i",{className:"fa fa-search"}),"\xa0\xa0Search"),c.a.createElement(P.a,{style:{marginLeft:"1rem"},type:"button",color:"danger",onClick:function(t){return e.setState({adsSearch:e.state.oglasi,adsFiltered:e.state.oglasi,hideAll:!1})}},"Reset")))))))))),c.a.createElement("section",{className:"bar pt-0",hidden:this.state.hideAll},c.a.createElement("div",{className:"row"},this.state.oglasi.map((function(t){return c.a.createElement(le.c,{style:{width:"18rem",textAlign:"left",alignItems:"center",margin:9},key:t.id,"data-key":t.id},c.a.createElement("div",{style:{width:"17rem",height:"13rem"}},c.a.createElement("img",{style:{maxWidth:"17rem",maxHeight:"12rem",textAlign:"center",alignItems:"center",margin:5},src:t.carAd.images[0].imageUrl,alt:"Fotografija",top:!0,hover:!0,overlay:"white-slight"})),c.a.createElement("div",null,c.a.createElement(Ee.a,{style:{justifyContent:"right"},rating:t.carAd.raiting,starRatedColor:"gold",numberOfStars:5,name:"rating",starDimension:"20px",starSpacing:"5px"}),c.a.createElement("h4",{style:{textAlign:"center"},className:"text-primary font-weight-bold"},t.carAd.model," ",t.carAd.make),c.a.createElement(le.d,{tag:"h6"}," Pick up location: ",t.city," "),c.a.createElement(le.d,{tag:"h6"}," Start date: ",e.getDateString(t.startDate),"  "),c.a.createElement(le.d,{tag:"h6"}," End date: ",e.getDateString(t.endDate),"  "),c.a.createElement(le.d,{tag:"h6",hidden:!t.carAd.insurance}," Collision Damage Waiver: ",c.a.createElement("i",{className:"fa fa-check"}),"  "),c.a.createElement(le.d,{tag:"h6",hidden:t.carAd.insurance}," Collision Damage Waiver: ",c.a.createElement("i",{className:"fa fa-close"}),"  "),c.a.createElement(P.a,{color:"primary",size:"md",onClick:function(a){return e.saznajVise(t.id)}},"Details"),localStorage.getItem("name")===t.name&&c.a.createElement(P.a,{color:"success",size:"md",onClick:function(a){return e.openModal(t)}}," ","Reserve"),localStorage.getItem("name")!==t.name&&c.a.createElement(P.a,{color:"warning",size:"md",hidden:e.state.hideBasket,onClick:function(a){return e.addToBasket(t.id)}}," ","Add to basket")))})))),c.a.createElement(O.a,{hidden:!this.state.hideAll},c.a.createElement(M.a,{style:{backgroundColor:"white"},hidden:!this.state.hideSearch},c.a.createElement(y.a,null,c.a.createElement(S.a,{md:"9",xs:"9",lg:"9"},c.a.createElement("i",{className:"fa fa-car"})," ",c.a.createElement("b",null,this.state.city,", ",this.getDateString(this.getDateTime(this.state.startDate,this.state.startTime))," - ",this.getDateString(this.getDateTime(this.state.endDate,this.state.endTime)))),c.a.createElement(S.a,{md:"3",xs:"3",lg:"3"},c.a.createElement(P.a,{color:"link",className:"text-right m-0 p-0",onClick:function(){return e.setState({hideSearch:!1})}},c.a.createElement("h6",{className:"m-0 p-0"},"Change search ",c.a.createElement("i",{className:"fa fa-search"}))),c.a.createElement(P.a,{style:{marginLeft:"1rem"},type:"button",color:"danger",onClick:function(t){return e.setState({adsSearch:e.state.oglasi,adsFiltered:e.state.oglasi,hideSearch:!1,hideBasket:!0})}},"Reset"))),c.a.createElement(y.a,{style:{flex:1,flexDirection:"column"}},c.a.createElement(de.a,{direction:"down",style:{flex:1},isOpen:this.state.dropdownOpen,toggle:function(){e.toggle()}},c.a.createElement(ue.a,{tag:"span",onClick:function(){e.toggle()},"data-toggle":"dropdown","aria-expanded":this.state.dropdownOpen},c.a.createElement(P.a,{style:{float:"right",marginRight:"1.5rem"},color:"primary"},c.a.createElement("h6",{className:"m-0 p-0"},"All filters"))),c.a.createElement(he.a,{md:"12",lg:"12",xs:"12",block:!0,style:{padding:"1rem",width:"100%"}},c.a.createElement("div",null,c.a.createElement(y.a,null,this.renderCheckboxes(0),this.renderCheckboxes(1),this.renderCheckboxes(2),this.renderCheckboxes(3),this.renderCheckboxes(4),c.a.createElement(S.a,{md:"2"},c.a.createElement("h6",null,"Daily price (KM)"),c.a.createElement(ve,{min:0,max:this.state.maxPrice,defaultValue:[this.state.selectedPrice[0],this.state.selectedPrice[1]],allowCross:!1,tipFormatter:function(e){return"".concat(e)},onChange:function(t){e.setState({selectedPrice:t})},trackStyle:[{backgroundColor:"blue"},{backgroundColor:"blue"}],railStyle:{backgroundColor:"lightBlue"},tipProps:{placement:"top",prefixCls:"rc-slider-tooltip"}}),c.a.createElement("br",null),c.a.createElement("h6",null,"Mileage (km)"),c.a.createElement(be,{min:0,max:this.state.maxMileage,defaultValue:this.state.selectedMileage,tipFormatter:function(e){return"".concat(e)},onChange:function(t){e.setState({selectedMileage:t})},trackStyle:{backgroundColor:"blue"},railStyle:{backgroundColor:"lightBlue"}}),c.a.createElement("br",null),c.a.createElement("h6",null,"Mileage limit (km)"),c.a.createElement(y.a,null,c.a.createElement(S.a,{md:"9"},"Unlimited"),c.a.createElement(S.a,{md:"2"},c.a.createElement(B.a,{type:"checkbox",checked:this.state.unlimitedMileage,value:this.state.unlimitedMileage,onChange:function(t){return e.setState({unlimitedMileage:!e.state.unlimitedMileage})}}))),c.a.createElement(be,{disabled:this.state.unlimitedMileage,style:{marginTop:"0.5rem"},min:0,max:this.state.maxMileageLimit,defaultValue:this.state.selectedMileageLimit,tipFormatter:function(e){return"".concat(e)},onChange:function(t){e.setState({selectedMileageLimit:t})},trackStyle:{backgroundColor:"blue"},railStyle:{backgroundColor:"lightBlue"}}),c.a.createElement("br",null),c.a.createElement("h6",null,"Kids seats"),c.a.createElement(be,{min:0,max:this.state.maxKids,defaultValue:this.state.selectedKids,tipFormatter:function(e){return"".concat(e)},onChange:function(t){e.setState({selectedKids:t})},trackStyle:{backgroundColor:"lightBlue"},railStyle:{backgroundColor:"blue"}}))),c.a.createElement("br",null),c.a.createElement(y.a,null,c.a.createElement(S.a,{md:"3"},c.a.createElement("h6",null,"Collision damage"),c.a.createElement("h6",null," waiver                           ",c.a.createElement(B.a,{style:{marginLeft:"2rem"},type:"checkbox",checked:this.state.damageWaiver,value:this.state.damageWaiver,onChange:function(t){return e.setState({damageWaiver:!e.state.damageWaiver})}}))),c.a.createElement(S.a,{md:"3"},c.a.createElement(y.a,null,c.a.createElement("h6",null,"Sort by"),c.a.createElement(de.a,{style:{marginLeft:"1rem"},isOpen:this.state.isOpenSort,toggle:function(){e.toggle2()}},c.a.createElement(ue.a,{caret:!0,style:{width:"10rem"}},this.state.selectedSort),c.a.createElement(he.a,{hidden:!this.state.isOpenSort},c.a.createElement(ge.a,{onClick:function(t){return e.setState({selectedSort:"Price"})}},"\xa0\xa0",c.a.createElement(B.a,{name:"sort",type:"radio",checked:"Price"===this.state.selectedSort,value:"Price"},"Price"),"Price"),c.a.createElement(ge.a,{onClick:function(t){return e.setState({selectedSort:"Rating"})}},"\xa0\xa0",c.a.createElement(B.a,{name:"sort",type:"radio",checked:"Rating"===this.state.selectedSort,value:"Rating"},"Rating"),"Rating"),c.a.createElement(ge.a,{onClick:function(t){return e.setState({selectedSort:"Mileage"})}},"\xa0\xa0",c.a.createElement(B.a,{name:"sort",type:"radio",checked:"Mileage"===this.state.selectedSort,value:"Mileage"},"Mileage"),"Mileage"))))))),c.a.createElement("div",{style:{justifyContent:"right",justifySelf:"right"}},c.a.createElement("br",null),c.a.createElement(P.a,{type:"button",style:{margin:5},color:"secondary",onClick:function(t){return e.clearAll()}},"Clear all"),c.a.createElement(P.a,{type:"button",color:"primary",onClick:function(t){return e.apply()}},"Apply")))))),c.a.createElement(R.a,{style:{backgroundColor:"white"}},c.a.createElement("section",{className:"bar pt-0"},c.a.createElement("div",{className:"row"},this.state.adsFiltered.map((function(t){return c.a.createElement(le.c,{style:{backgroundColor:"azure",width:"20rem",textAlign:"left",alignItems:"center",margin:9},key:t.id,"data-key":t.id},c.a.createElement("div",{onClick:function(a){return e.saznajVise(t.id)},style:{width:"19rem",height:"13rem"}},c.a.createElement("img",{style:{maxWidth:"19rem",maxHeight:"12rem",textAlign:"center",alignItems:"center",margin:5},src:t.carAd.images[0].imageUrl,alt:"Fotografija",top:!0,hover:!0,overlay:"white-slight"})),c.a.createElement("div",null,c.a.createElement(Ee.a,{style:{justifyContent:"right"},rating:t.carAd.raiting,starRatedColor:"gold",numberOfStars:5,name:"rating",starDimension:"20px",starSpacing:"5px"}),c.a.createElement("h4",{style:{textAlign:"center"},className:"text-primary font-weight-bold"},t.carAd.model," ",t.carAd.make),c.a.createElement(y.a,null,c.a.createElement(S.a,null,c.a.createElement(le.d,{tag:"h6"}," Car class: ",c.a.createElement("p",{style:{color:"red"}},t.carAd.carClass),"  "),c.a.createElement(le.d,{tag:"h6"}," Daily price: ",c.a.createElement("p",{style:{color:"red"}},t.pricelist.priceDay),"  "),c.a.createElement(le.d,{tag:"h6"}," Mileage: ",c.a.createElement("p",{style:{color:"red"}},t.carAd.mileage),"  "),c.a.createElement(le.d,{tag:"h6"}," Fuel type: ",c.a.createElement("p",{style:{color:"red"}},t.carAd.fuel)," ")),c.a.createElement(S.a,null,c.a.createElement(le.d,{tag:"h6"}," Kids seats: ",c.a.createElement("p",{style:{color:"red"}},t.carAd.kidsSeats),"  "),c.a.createElement(le.d,{tag:"h6"}," Collision Damage Waiver: ",c.a.createElement("i",{style:{color:"red"},hidden:!t.carAd.insurance,className:"fa fa-check"}),c.a.createElement("i",{style:{color:"red"},hidden:t.carAd.insurance,className:"fa fa-close"}),"  "),c.a.createElement(le.d,{tag:"h6"}," Mileage limit: ",c.a.createElement("p",{style:{color:"red"}},t.carAd.mileageLimit),"  "),c.a.createElement(le.d,{tag:"h6"}," Gearbox type: ",c.a.createElement("p",{style:{color:"red"}},t.carAd.gearbox),"  "))),c.a.createElement(le.d,{tag:"h6"}," Total price: ",c.a.createElement("p",{style:{color:"red"}},t.carAd.price),"  "),c.a.createElement(P.a,{color:"primary",size:"md",onClick:function(a){return e.saznajVise(t.id)}},"Details"),c.a.createElement(P.a,{color:"warning",size:"md",onClick:function(a){return e.addToBasket(t.id)},hidden:e.state.hideBasket},"Add to basket")))})))))),c.a.createElement(D.NotificationContainer,null))}}]),a}(s.Component),ke=a(98),xe=a(120),Ce=a(119),De=a(121),je=a(122),we=a(220),Te=a(221),Ne=a(222),Oe="https://localhost:8082/",Me=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var l;Object(n.a)(this,a),(l=t.call(this,e)).getPricelist=function(){var e=localStorage.getItem("ulogovan"),t="Bearer ".concat(e);C()({method:"get",url:Oe+"advertisement/pricelist",headers:{Authorization:t}}).then((function(e){200===e.status&&(l.setState({pricelists:e.data,showpricelist:e.data.slice(0,3)}),l.setState({cjenovnici:e.data}))}),(function(e){console.log(e)}))},l.collisionValidation=function(e){e.target.checked?l.setState({collision:!0}):l.setState({collision:!1}),console.log(l.state.collision)},l.state={activeIndex:0,activePage:1,canEdit:!1,idOglasa:"",brSjedista:"",cjenovnici:[],cjenovnikId:"",startDate:"",hideForm:!0,maxKilometraza:"",kilometraza:"",endDate:"",city:"",dugme:!1,pricelists:[],showpricelist:[],collision:!1,cjenovnik:"",comment:"",openWriteReview:!1,rating:0,reviewValidation:"",reviews:[],hideWriteComment:!0,oglas:{carAd:{images:[]}}};var o=[];return o.push(localStorage.getItem("role")),console.log("KONS",o),l.userRoles=o,l.allowedRoles=["ROLE_SELLER"],l.next=l.next.bind(Object(r.a)(l)),l.previous=l.previous.bind(Object(r.a)(l)),l.goToIndex=l.goToIndex.bind(Object(r.a)(l)),l.onExiting=l.onExiting.bind(Object(r.a)(l)),l.onExited=l.onExited.bind(Object(r.a)(l)),l.getDateString=l.getDateString.bind(Object(r.a)(l)),l.getDateStringPicker=l.getDateStringPicker.bind(Object(r.a)(l)),l.editAd=l.editAd.bind(Object(r.a)(l)),l.getPricelist=l.getPricelist.bind(Object(r.a)(l)),l.changeRating=l.changeRating.bind(Object(r.a)(l)),l.postReview=l.postReview.bind(Object(r.a)(l)),l.getReviews=l.getReviews.bind(Object(r.a)(l)),l.getCanComment=l.getCanComment.bind(Object(r.a)(l)),l}return Object(l.a)(a,[{key:"reset",value:function(){this.setState({hideForm:!0,canEdit:!1,cjenovnikId:this.state.oglas.pricelist.id,dugme:!1,startDate:"",endDate:"",brSjedista:this.state.oglas.carAd.kidsSeats,kilometraza:this.state.oglas.carAd.mileage,maxKilometraza:this.state.oglas.carAd.mileageLimit,city:this.state.oglas.city})}},{key:"edit",value:function(e){this.setState({hideForm:!1,canEdit:!0})}},{key:"cityValidation",value:function(e){return e=(e=(e=(e=e.replace(/</g,"")).replace(/>/g,"")).replace(/script/g,"")).replace(/alert/g,""),this.setState({city:e}),""===e?(this.setState({cityText:"Ovo polje ne moze biti prazno"}),!1):(this.setState({cityText:""}),!0)}},{key:"promijeniPeriod",value:function(e){this.setState({dugme:!0})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.getPricelist(),this.getReviews(),"ROLE_CUSTOMER"===localStorage.getItem("role")&&this.getCanComment();var a=localStorage.getItem("ulogovan"),n="Bearer ".concat(a);C()({method:"get",url:Oe+"advertisement/advertisement/"+t,headers:{Authorization:n}}).then((function(t){console.log(t),console.log(t.data.pricelist),e.setState({oglas:t.data}),e.setState({idOglasa:t.data.id}),console.log("id"),console.log(e.state.idOglasa),e.setState({cjenovnik:t.data.pricelist,kilometraza:t.data.carAd.mileage,maxKilometraza:t.data.carAd.mileageLimit,city:t.data.city,cjenovnikId:t.data.pricelist.id,brSjedista:t.data.carAd.kidsSeats});var a=new Date(t.data.startDate);console.log(e.state.cjenovnik),!0===t.data.carAd.insurance&&e.setState({collision:!0});var n=a.getMonth()+1,l=a.getDate();n<10&&(n="0"+n),a.getDate()<10&&(l="0"+a.getDate()),console.log("daan1"),console.log(a.getDate());var r=a.getFullYear()+"-"+n+"-"+l;console.log("start"),console.log(r),e.setState({startDate:r}),n=(a=new Date(t.data.endDate)).getMonth()+1,l=a.getDate(),n<10&&(n="0"+n),a.getDate()<10&&(l="0"+a.getDate()),r=a.getFullYear()+"-"+n+"-"+l,console.log("end"),console.log(r),e.setState({endDate:r})}),(function(e){console.log(e)})),C()({method:"get",url:Oe+"advertisement/advertisement/canAccess/"+t,headers:{Authorization:n}}).then((function(t){console.log(t),e.setState({canEdit:!1})}),(function(e){console.log(e)}))}},{key:"getReviews",value:function(){var e=this,t=localStorage.getItem("ulogovan"),a="Bearer ".concat(t),n=this.props.match.params.id;C()({method:"get",url:Oe+"advertisement/review/carId/"+n,headers:{Authorization:a}}).then((function(t){var a=t.data;a.sort((function(e,t){return t.date-e.date})),e.setState({reviews:a})}),(function(e){console.log(e)}))}},{key:"cjenovnikValidation",value:function(e){this.setState({cjenovnikId:e})}},{key:"onExiting",value:function(){this.animating=!0}},{key:"sjedisteValidation",value:function(e){this.setState({brSjedista:e});var t=e;return""===t?(this.setState({sjedisteText:"Ovo polje ne moze biti prazno"}),!1):"-"===t||t<0?(this.setState({sjedisteText:"Broj sjedista mora biti pozitivan broj!"}),!1):t>7?(this.setState({sjedisteText:"Maksimalna broj sjedista je 7!"}),!1):(this.setState({sjedisteText:""}),!0)}},{key:"kilometrazaValidation",value:function(e){this.setState({kilometraza:e});var t=e;return""===t?(this.setState({kilometrazaText:"Ovo polje ne moze biti prazno"}),!1):"-"===t||t<0?(this.setState({kilometrazaText:"Kilometraza mora biti pozitivan broj!"}),!1):(this.setState({kilometrazaText:""}),!0)}},{key:"maxKilometrazaValidation",value:function(e){this.setState({maxKilometraza:e});var t=e;return""===t?(this.setState({maxKilometrazaText:"Ovo polje ne moze biti prazno"}),!1):"-"===t||t<0?(this.setState({maxKilometrazaText:"Kilometraza mora biti pozitivan broj!"}),!1):(this.setState({maxKilometrazaText:""}),!0)}},{key:"handlePageChange",value:function(e){var t=3*(e-1);this.setState({activePage:e,showpricelist:this.state.pricelists.slice(t,t+3)})}},{key:"toggle",value:function(){this.setState({collapse:!this.state.collapse})}},{key:"toggleFade",value:function(){this.setState((function(e){return{fadeIn:!e}}))}},{key:"onExited",value:function(){this.animating=!1}},{key:"next",value:function(){if(!this.animating){var e=this.state.activeIndex===this.state.oglas.carAd.images.length-1?0:this.state.activeIndex+1;this.setState({activeIndex:e})}}},{key:"previous",value:function(){if(!this.animating){var e=0===this.state.activeIndex?this.state.oglas.carAd.images.length-1:this.state.activeIndex-1;this.setState({activeIndex:e})}}},{key:"goToIndex",value:function(e){this.animating||this.setState({activeIndex:e})}},{key:"editAd",value:function(e){var t=this;e.preventDefault();var a=!0;if(a=this.startDateValidation(this.state.startDate),a=this.endDateValidation(this.state.endDate)&&a,a=this.cityValidation(this.state.city)&&a,a=this.maxKilometrazaValidation(this.state.maxKilometraza)&&a,a=this.kilometrazaValidation(this.state.kilometraza)&&a,a=this.sjedisteValidation(this.state.brSjedista)&&a){var n={city:this.state.city,startDate:this.state.startDate,endDate:this.state.endDate,carAd:{mileage:this.state.kilometraza,mileageLimit:this.state.maxKilometraza,kidsSeats:this.state.brSjedista,insurance:this.state.collision}},l=localStorage.getItem("ulogovan"),r="Bearer ".concat(l);C()({method:"put",url:Oe+"advertisement/advertisement/"+this.state.oglas.id+"/"+this.state.cjenovnikId,data:n,headers:{Authorization:r}}).then((function(e){t.setState({oglas:e.data}),t.reset(),D.NotificationManager.success("Successfully added!","",3e3)}),(function(e){console.log(e)}))}}},{key:"delete",value:function(e){var t=this,a=localStorage.getItem("ulogovan"),n="Bearer ".concat(a);C()({method:"delete",url:Oe+"advertisement/advertisement/"+this.state.oglas.id,headers:{Authorization:n}}).then((function(e){t.setState({izbrisan:!0}),D.NotificationManager.success("Successfully deleted!","",3e3)}),(function(e){console.log(e)}))}},{key:"getDateStringPicker",value:function(e){var t=new Date(e),a=t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear();return console.log(a),a}},{key:"startDateValidation",value:function(e){var t,a,n;if(console.log(e),console.log(this.state.collision),this.setState({startDate:e}),""!==e&&void 0!==e){t=e[0]+e[1]+e[2]+e[3],a=e[5]+e[6],n=e[8]+e[9];var l=new Date,r=parseInt(l.getDate()),o=parseInt(l.getMonth()+1),i=parseInt(l.getFullYear());return t=parseInt(t),a=parseInt(a),n=parseInt(n),void 0===e||""===e?(this.setState({startDateText:"Datum je obavezno polje"}),!1):t<i?(this.setState({startDateText:"Godina je prosla"}),!1):a<o&&t<=i?(this.setState({startDateText:"Mjesec je prosao"}),!1):n<r&&a<=o&&t<=i?(this.setState({startDateText:"Dan je prosao"}),!1):(this.setState({startDateText:""}),!0)}}},{key:"commentValidation",value:function(e){e=(e=(e=(e=e.replace(/</g,"")).replace(/>/g,"")).replace(/script/g,"")).replace(/alert/g,""),this.setState({comment:e})}},{key:"endDateValidation",value:function(e){this.setState({endDate:e});var t,a,n,l=this.state.startDate,r=e;if(""!==e&&void 0!==e){t=e[0]+e[1]+e[2]+e[3],a=e[5]+e[6],n=e[8]+e[9];var o=new Date,i=parseInt(o.getDate()),s=parseInt(o.getMonth()+1),c=parseInt(o.getFullYear());return t=parseInt(t),a=parseInt(a),n=parseInt(n),void 0===e||""===e?(this.setState({endDateText:"Datum je obavezno polje"}),!1):t<c?(this.setState({endDateText:"Godina je prosla"}),!1):a<s&&t<=c?(this.setState({endDateText:"Mjesec je prosao"}),!1):n<i&&a<=s&&t<=c?(this.setState({endDateText:"Dan je prosao"}),!1):new Date(r)<=new Date(l)?(this.setState({endDateText:"Datum mora biti veci od pocetnog"}),!1):(this.setState({endDateText:""}),!0)}}},{key:"getDateString",value:function(e){var t=new Date(e),a=t.getMonth()+1,n=t.getDate()+"."+a+"."+t.getFullYear()+", ",l=t.getHours(),r=t.getMinutes();return l<10&&(l="0"+l),r<10&&(r="0"+r),n=n+l+":"+r}},{key:"changeRating",value:function(e,t){this.setState({rating:e})}},{key:"postReview",value:function(){var e=this,t=this.state.comment;0!==this.state.rating||""!==this.state.comment&&null!==this.state.comment?this.setState({reviewValidation:""}):this.setState({reviewValidation:"You must leave comment or rate service"}),""===this.state.comment&&(t=null);var a=this.props.match.params.id,n=localStorage.getItem("ulogovan"),l="Bearer ".concat(n);C()({method:"post",url:Oe+"advertisement/review",headers:{Authorization:l},data:{evaluation:this.state.rating,carId:Number(a),text:t}}).then((function(t){200===t.status&&(D.NotificationManager.info("You have successfully submitted your review","",3e3),e.setState({openWriteReview:!1,comment:"",rating:0})),e.getCanComment()}),(function(e){console.log(e)}))}},{key:"getCanComment",value:function(){var e=this,t=this.props.match.params.id,a=localStorage.getItem("ulogovan"),n="Bearer ".concat(a);C()({method:"get",url:Oe+"advertisement/car/"+t+"/writeReview",headers:{Authorization:n}}).then((function(t){200===t.status&&e.setState({hideWriteComment:!t.data})}),(function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.activeIndex,a=this.state.pricelists.length,n=Array.from(Array(Math.ceil(a/3)).keys()),l=this.state.oglas.carAd.images.map((function(t){return c.a.createElement(ke.a,{onExiting:e.onExiting,onExited:e.onExited,key:t.imageUrl},c.a.createElement("img",{style:{maxWidth:"38rem",maxHeight:"35rem"},alt:"",className:"d-block w-100",src:t.imageUrl}),c.a.createElement(xe.a,null))}));return c.a.createElement("div",{className:"content"},c.a.createElement("div",null,c.a.createElement(y.a,{hidden:this.state.izbrisan},c.a.createElement(S.a,{xs:"12",sm:"6",md:"6",xl:"6"},c.a.createElement(O.a,{style:{textAlign:"left"},key:this.state.oglas.id,"data-key":this.state.oglas.id},c.a.createElement(M.a,null,c.a.createElement("h4",{style:{textAlign:"center"},className:"text-primary font-weight-bold"},this.state.oglas.carAd.model," ",this.state.oglas.carAd.make)),c.a.createElement(R.a,null,c.a.createElement("div",null,c.a.createElement(y.a,null,c.a.createElement(S.a,{md:"4"},c.a.createElement(le.d,{tag:"h6"}," Car class: ",c.a.createElement("p",{style:{color:"red"}},this.state.oglas.carAd.carClass),"  "),c.a.createElement(le.d,{tag:"h6"}," Mileage limit: ",c.a.createElement("p",{style:{color:"red"}},this.state.oglas.carAd.mileageLimit,"km"),"  "),c.a.createElement(le.d,{tag:"h6"}," Gearbox type: ",c.a.createElement("p",{style:{color:"red"}},this.state.oglas.carAd.gearbox),"  "),c.a.createElement(le.d,{tag:"h6"}," Mileage: ",c.a.createElement("p",{style:{color:"red"}},this.state.oglas.carAd.mileage,"km"),"  "),c.a.createElement(le.d,{tag:"h6"}," Kids seats: ",c.a.createElement("p",{style:{color:"red"}},this.state.oglas.carAd.kidsSeats),"  ")),c.a.createElement(S.a,{md:"4"},c.a.createElement(le.d,{tag:"h6"}," Fuel type: ",c.a.createElement("p",{style:{color:"red"}},this.state.oglas.carAd.fuel)," "),c.a.createElement(le.d,{tag:"h6"}," Pick up location:",c.a.createElement("p",{style:{color:"red"}}," ",this.state.oglas.city," ")),c.a.createElement(le.d,{tag:"h6"}," Start date: ",c.a.createElement("p",{style:{color:"red"}},this.getDateString(this.state.oglas.startDate),"  ")," "),c.a.createElement(le.d,{tag:"h6"}," End date: ",c.a.createElement("p",{style:{color:"red"}},this.getDateString(this.state.oglas.endDate),"   ")),c.a.createElement(le.d,{tag:"h6",hidden:!this.state.oglas.carAd.insurance}," Collision Damage Waiver: ",c.a.createElement("i",{style:{color:"red"},className:"fa fa-check"}),"  "),c.a.createElement(le.d,{tag:"h6",hidden:this.state.oglas.carAd.insurance}," Collision Damage Waiver: ",c.a.createElement("i",{style:{color:"red"},className:"fa fa-close"}),"  ")),c.a.createElement(S.a,{md:"4"},c.a.createElement(le.d,{tag:"h6"}," Daily price: ",c.a.createElement("p",{style:{color:"red"}},this.state.cjenovnik.priceDay," RSD")," "),c.a.createElement(le.d,{tag:"h6"}," Discount fo 20 days:",c.a.createElement("p",{style:{color:"red"}}," ",this.state.cjenovnik.discount20," RSD ")),c.a.createElement(le.d,{tag:"h6"}," Discount for 30 days: ",c.a.createElement("p",{style:{color:"red"}},this.state.cjenovnik.discount30," RSD  ")," "),c.a.createElement(le.d,{tag:"h6"}," Exceed: ",c.a.createElement("p",{style:{color:"red"}},this.state.cjenovnik.exceedMileage," RSD   ")))),c.a.createElement(y.a,null,c.a.createElement(S.a,{sm:"6",xl:"6",md:"6"},c.a.createElement(le.d,{tag:"h6"}," Owner: ",c.a.createElement("p",{style:{color:"red"}},this.state.oglas.username,"   "))),"ROLE_SELLER"===localStorage.getItem("role")&&c.a.createElement(S.a,{sm:"3",xl:"3",md:"3",hidden:this.state.canEdit,className:"mb-3 mb-xl-0"},c.a.createElement(P.a,{block:!0,color:"primary",onClick:function(t){return e.edit(t)}},"Edit")),"ROLE_SELLER"===localStorage.getItem("role")&&c.a.createElement(S.a,{sm:"3",xl:"3",md:"3",hidden:this.state.canEdit,className:"mb-3 mb-xl-0"},c.a.createElement(P.a,{block:!0,color:"primary",onClick:function(t){return e.delete(t)}},"Delete"))))))),c.a.createElement(S.a,{xs:"12",md:"6",xl:"6"},c.a.createElement(O.a,{style:{maxWidth:"40rem",maxHeight:"40rem"}},c.a.createElement(M.a,null,c.a.createElement(y.a,null,c.a.createElement(S.a,{md:"8"},c.a.createElement("i",{className:"fa fa-image fa-lg"}),c.a.createElement("strong",null,"Images")),c.a.createElement(S.a,null,c.a.createElement(Ee.a,{style:{justifyContent:"right"},rating:this.state.oglas.carAd.raiting,starRatedColor:"gold",numberOfStars:5,name:"rating",starDimension:"20px",starSpacing:"5px"})))),c.a.createElement(R.a,null,c.a.createElement(Ce.a,{activeIndex:t,next:this.next,previous:this.previous},c.a.createElement(De.a,{items:this.state.oglas.carAd.images,activeIndex:t,onClickHandler:this.goToIndex}),l,c.a.createElement(je.a,{direction:"prev",directionText:"Previous",onClickHandler:this.previous}),c.a.createElement(je.a,{direction:"next",directionText:"Next",onClickHandler:this.next}))),c.a.createElement(V.a,null)),c.a.createElement(y.a,{hidden:"ROLE_CUSTOMER"!==localStorage.getItem("role")||this.state.hideWriteComment,style:{float:"right"}},c.a.createElement(P.a,{style:{width:"250px",float:"right",marginRight:"2rem"},block:!0,color:"primary",onClick:function(t){return e.setState({openWriteReview:!0})}},"Write a customer review")))),c.a.createElement(y.a,{hidden:this.state.hideForm},c.a.createElement(S.a,{xs:"12",md:"6",xl:"6"},c.a.createElement(O.a,null,c.a.createElement(M.a,null,c.a.createElement("strong",null,"Editing advertisement")),c.a.createElement(R.a,null,c.a.createElement(F.a,{action:"",method:"post",encType:"multipart/form-data",className:"form-horizontal"},c.a.createElement(y.a,null,c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,null,"Kids seats")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"number",id:"date-input",value:this.state.brSjedista,onChange:function(t){return e.sjedisteValidation(t.target.value)},name:"date-input",placeholder:"broj sjedista"}),c.a.createElement(H.a,{color:"danger"},this.state.sjedisteText)))),c.a.createElement(S.a,{md:"6"},c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,null,"City")),c.a.createElement(S.a,{md:"9"},c.a.createElement(B.a,{type:"text",name:"city",value:this.state.city,onChange:function(t){return e.cityValidation(t.target.value)},placeholder:"Pick up location"}),c.a.createElement(H.a,{color:"danger"},this.state.cityText))))),c.a.createElement(y.a,null,c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"password-input"},"Kilometraza")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"number",value:this.state.kilometraza,id:"password-input",onChange:function(t){return e.kilometrazaValidation(t.target.value)},name:"password-input",placeholder:"predjeni kilometri",autoComplete:"new-password"}),c.a.createElement(H.a,{color:"danger"},this.state.kilometrazaText)))),c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"password-input"},"Max kilometara")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"number",id:"date-input",value:this.state.maxKilometraza,onChange:function(t){return e.maxKilometrazaValidation(t.target.value)},name:"date-input",placeholder:"max kilometara"}),c.a.createElement(H.a,{color:"danger"},this.state.maxKilometrazaText))))),c.a.createElement(y.a,null,c.a.createElement(S.a,null)),c.a.createElement(y.a,{hidden:this.state.editDate},c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"password-input"},"Od")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"date",id:"password-input",value:this.state.startDate,onChange:function(t){return e.startDateValidation(t.target.value)},name:"password-input",placeholder:"od",autoComplete:"new-password"}),c.a.createElement(H.a,{color:"danger"},this.state.startDateText)))),c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,{htmlFor:"password-input"},"Do")),c.a.createElement(S.a,{xs:"12",md:"9"},c.a.createElement(B.a,{type:"date",id:"date-input",value:this.state.endDate,onChange:function(t){return e.endDateValidation(t.target.value)},name:"date-input",placeholder:"do"}),c.a.createElement(H.a,{color:"danger"},this.state.endDateText))))),c.a.createElement(y.a,null,c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{xs:"12",md:"1"},c.a.createElement(Y.a,{htmlFor:"password-input"},"Pricelist")),c.a.createElement(S.a,{md:"11"},c.a.createElement(B.a,{disabled:!0,type:"select",value:this.state.cjenovnikId,onChange:function(t){e.cjenovnikValidation(t.target.value)}},this.state.cjenovnici.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},"Po danu:",e.priceDay," DC:",e.collisionDW," Popust na 20 dana:",e.discount20,"% Popust na 30 dana:",e.discount30,"%  ")}))))))),c.a.createElement(y.a,null,c.a.createElement(S.a,null,c.a.createElement(L.a,{row:!0},c.a.createElement(S.a,{md:"3"},c.a.createElement(Y.a,null,"Collision Damage Waiver")),c.a.createElement(S.a,{md:"9"},c.a.createElement(L.a,{className:"checkbox"},c.a.createElement(B.a,{type:"checkbox",onChange:this.collisionValidation,checked:this.state.collision,name:"collision",value:"collision"}),c.a.createElement(Y.a,{check:!0,className:"form-check-label",htmlFor:"checkbox1"},"Da ")))))))),c.a.createElement(V.a,null,c.a.createElement(H.a,{color:"danger"},this.state.oglasiText),c.a.createElement(P.a,{type:"submit",size:"sm",color:"primary",onClick:function(t){return e.editAd(t)}},c.a.createElement("i",{className:"fa fa-dot-circle-o"})," Edit"),c.a.createElement(P.a,{type:"reset",size:"sm",color:"danger",onClick:function(t){return e.reset(t)}},c.a.createElement("i",{className:"fa fa-ban"})," Cancel")))),c.a.createElement(S.a,{xs:"6",md:"6"},c.a.createElement(O.a,null,c.a.createElement(M.a,null,c.a.createElement("strong",null,"Pricelists")),c.a.createElement(R.a,null,c.a.createElement(q.a,{responsive:!0,hover:!0},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{className:"text-primary font-weight-bold"},"Daily price (RSD)"),c.a.createElement("th",{className:"text-primary font-weight-bold"},"Collision DW (RSD)"),c.a.createElement("th",{className:"text-primary font-weight-bold"},"Discount 20 days"),c.a.createElement("th",{className:"text-primary font-weight-bold"},"Discount 30 days"),c.a.createElement("th",{className:"text-primary font-weight-bold"},"Exceed mileage"))),c.a.createElement("tbody",null,this.state.showpricelist.map((function(t){return c.a.createElement("tr",{key:t.id},c.a.createElement("td",null,t.priceDay),c.a.createElement("td",null,t.collisionDW),c.a.createElement("td",null,t.discount20," %"),c.a.createElement("td",null,t.discount30," %"),c.a.createElement("td",null,t.exceedMileage),c.a.createElement("td",null,c.a.createElement(P.a,{block:!0,className:"btn-round",color:"info",onClick:function(a){return e.cjenovnikValidation(t.id,a)}},"Select")))}))))),c.a.createElement(V.a,null,c.a.createElement("nav",null,c.a.createElement(J.a,null,c.a.createElement(X.a,null,c.a.createElement($.a,{disabled:1===this.state.activePage,previous:!0,tag:"button",onClick:function(t){return e.handlePageChange(e.state.activePage-1)}})),n.map((function(t){return c.a.createElement("div",null,c.a.createElement(X.a,{active:!0,hidden:e.state.activePage!==t+1},c.a.createElement($.a,{tag:"button"},t+1)),c.a.createElement(X.a,{hidden:e.state.activePage===t+1},c.a.createElement($.a,{tag:"button",onClick:function(a){return e.handlePageChange(t+1)}},t+1)))})),c.a.createElement(X.a,null,c.a.createElement($.a,{disabled:this.state.activePage===Math.ceil(a/3),next:!0,tag:"button",onClick:function(t){return e.handlePageChange(e.state.activePage+1)}})))))))),c.a.createElement(ie.a,{isOpen:this.state.openWriteReview},c.a.createElement(we.a,null,"Review"),c.a.createElement(Te.a,null,c.a.createElement(L.a,null,c.a.createElement("label",null,"Comment:"),c.a.createElement(B.a,{type:"textarea",value:this.comment,value:this.comment,onChange:function(t){return e.commentValidation(t.target.value)}}),c.a.createElement("br",null),c.a.createElement("label",{style:{marginRight:"1rem"}},"Rating:"),c.a.createElement(Ee.a,{rating:this.state.rating,starRatedColor:"gold",changeRating:this.changeRating,numberOfStars:5,name:"rating",starHoverColor:"yellow",starDimension:"20px",starSpacing:"5px"}),c.a.createElement("p",{style:{color:"red"}},this.state.reviewValidation))),c.a.createElement(Ne.a,null,c.a.createElement(P.a,{color:"primary",onClick:this.postReview},"Post review")," ",c.a.createElement(P.a,{color:"secondary",onClick:function(){return e.setState({openWriteReview:!1,rating:0,comment:""})}},"Cancel"))),c.a.createElement(y.a,{style:{justifyContent:"center"}},c.a.createElement(S.a,{xs:"12",md:"8",xl:"8"},c.a.createElement(O.a,null,c.a.createElement(M.a,null,c.a.createElement("h5",null,c.a.createElement("strong",null,"Customer reviews"))),c.a.createElement(R.a,null,this.state.reviews.map((function(t){return c.a.createElement("div",{key:t.id,"data-key":t.id},c.a.createElement("br",null),c.a.createElement(y.a,null,c.a.createElement(S.a,{xs:"12",md:"8",xl:"8"},c.a.createElement("h7",null,c.a.createElement("strong",null,t.username))),c.a.createElement(S.a,{xs:"4",md:"4",xl:"4"},"Posted on: ",e.getDateString(t.date))),c.a.createElement(Ee.a,{rating:t.evaluation,starRatedColor:"gold",numberOfStars:5,name:"rating",starDimension:"15px",starSpacing:"5px"}),c.a.createElement("br",null),c.a.createElement(Y.a,{style:{color:"black",fontSize:"12",marginTop:"0.5rem"}},t.text),c.a.createElement("hr",{style:{color:"black",backgroundColor:"black"}}),c.a.createElement("br",null))}))))))),c.a.createElement(D.NotificationContainer,null))}}]),a}(s.Component),Ae=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var l;Object(n.a)(this,a),(l=t.call(this,e)).fillBasket=function(){sessionStorage.getItem("basket");var e=localStorage.getItem("ulogovan"),t="Bearer ".concat(e),a=JSON.parse(sessionStorage.getItem("basket"))||[];console.log(a),C()({method:"post",url:"https://localhost:8082/advertisement/advertisement/filter",headers:{Authorization:t},data:a}).then((function(e){200===e.status?l.setState({ads:e.data}):(l.setState({ads:[]}),D.NotificationManager.info("Your basket is empty!","",3e3))}),(function(e){console.log(e)}))},l.requestSelection=function(e,t){for(var a=!1,n=0;n<l.state.checkedAds.length;n++)if(e===l.state.checkedAds[n].split("+")[0]){a=!0;break}if(a){for(var r=[],o=0;o<l.state.checkedAds.length;o++)e!==l.state.checkedAds[o].split("+")[0]&&r.push(l.state.checkedAds[o]);l.state.checkedAds=r}else{var i=e.concat("+").concat(t);l.state.checkedAds.push(i)}0==l.state.checkedAds.length?l.setState({readyForRequest:!0}):l.setState({readyForRequest:!1})},l.toggle=function(){l.setState({openModal:!l.state.openModal})},l.askForRent=function(){l.state.bundle;var e=l.state.checkedAds;e.push(localStorage.getItem("start")),e.push(localStorage.getItem("end"));var t=localStorage.getItem("ulogovan"),a="Bearer ".concat(t);C()({method:"post",url:"https://localhost:8082/orders/request",headers:{Authorization:a},data:e}).then((function(e){if(201===e.status){for(var t=0;t<l.state.checkedAds.length;t++)l.removeFromBasket(l.state.checkedAds[t].split("+")[0]);l.setState({checkedAds:[],agentForBundle:[]}),D.NotificationManager.success("Order is sent!","",3e3)}}),(function(e){console.log(e)}))},l.createRequests=function(e){l.state.bundle=e,l.state.agentForBundle=[],l.askForRent(),l.toggle()},l.removeFromBasket=function(e){for(var t=JSON.parse(sessionStorage.getItem("basket"))||[],a=[],n=0;n<t.length;n++)t[n]!=e&&a.push(t[n]);sessionStorage.setItem("basket",JSON.stringify(a)),l.state.ads=[],l.fillBasket()},l.handleSelectedCars=function(){for(var e=[],t=!1,a=0;a<l.state.checkedAds.length;a++)e.includes(l.state.checkedAds[a].split("+")[1])&&!l.state.agentForBundle.includes(l.state.checkedAds[a].split("+")[1])?(l.setState({agentForBundle:[].concat(Object(ne.a)(l.state.agentForBundle),[l.state.checkedAds[a].split("+")[1]])}),t=!0):e.push(l.state.checkedAds[a].split("+")[1]);t?l.setState({openModal:!0}):l.askForRent()},l.addToBundle=function(e,t){for(var a=l.state.checkedAds,n=t.target.checked,r=0;r<a.length;r++)a[r].split("+")[1]===e&&(a[r]=n?a[r].concat("+").concat("true"):a[r].substring(0,a[r].length-5));l.setState({checkedAds:a})},l.state={ads:[],hideEdit:!0,checkedAds:[],bundle:!1,openModal:!1,agentForBundle:[],readyForRequest:!0};var o=new Array;return o.push(localStorage.getItem("role")),console.log("KONS",o),l.userRoles=o,l.allowedRoles=["ROLE_CUSTOMER"],l.fillBasket=l.fillBasket.bind(Object(r.a)(l)),l.requestSelection=l.requestSelection.bind(Object(r.a)(l)),l.askForRent=l.askForRent.bind(Object(r.a)(l)),l.createRequests=l.createRequests.bind(Object(r.a)(l)),l.toggle=l.toggle.bind(Object(r.a)(l)),l.handleSelectedCars=l.handleSelectedCars.bind(Object(r.a)(l)),l.removeFromBasket=l.removeFromBasket.bind(Object(r.a)(l)),l.addToBundle=l.addToBundle.bind(Object(r.a)(l)),l.getDateString=l.getDateString.bind(Object(r.a)(l)),l}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.fillBasket()}},{key:"getDateString",value:function(e){var t=new Date(e),a=t.getMonth()+1,n=t.getDate()+"."+a+"."+t.getFullYear()+", ",l=t.getHours(),r=t.getMinutes();return l<10&&(l="0"+l),r<10&&(r="0"+r),n=n+l+":"+r}},{key:"render",value:function(){var e=this,t=c.a.createElement("div",{className:"animated fadeIn content"},c.a.createElement(O.a,null,c.a.createElement(R.a,null,c.a.createElement(q.a,{responsive:!0,striped:!0},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"#"),c.a.createElement("th",{color:"secondary"},"Agent"),c.a.createElement("th",{className:"crow"},"Brand"),c.a.createElement("th",{className:"crow"}," Model"),c.a.createElement("th",{className:"crow"},"Start date"),c.a.createElement("th",{className:"crow"},"End date"),c.a.createElement("th",{className:"crow"},"City"),c.a.createElement("th",{className:"crow"},"Rating"),c.a.createElement("th",{className:"crow"},"Price for selected dates"))),c.a.createElement("tbody",null,this.state.ads.map((function(t,a){return c.a.createElement("tr",{key:t.advertisementId,keyad:t.advertisementId,className:"crow"},c.a.createElement("td",{className:"crow"},c.a.createElement("input",{type:"checkbox",onChange:function(a){return e.requestSelection(a.target.parentNode.parentNode.getAttribute("keyad"),t.entrepreneur)}})),c.a.createElement("td",{className:"crow"},t.entrepreneur),c.a.createElement("td",{className:"crow"},t.make),c.a.createElement("td",{className:"crow"},t.model),c.a.createElement("td",{className:"crow"},e.getDateString(t.startDate)),c.a.createElement("td",{className:"crow"},e.getDateString(t.endDate)),c.a.createElement("td",{className:"crow"},t.city),c.a.createElement("td",{className:"crow"},t.rating),c.a.createElement("td",{className:"crow"},t.price),c.a.createElement("td",{className:"crow"},c.a.createElement(P.a,{block:!0,color:"info",onClick:function(a){return e.removeFromBasket(t.advertisementId)}},"Remove")))})))),c.a.createElement(P.a,{block:!0,color:"info",onClick:this.handleSelectedCars,disabled:this.state.readyForRequest},"Create request"))),c.a.createElement(ie.a,{isOpen:this.state.openModal,className:"modal-primary"},c.a.createElement(we.a,null),c.a.createElement(Te.a,null,"You selected more than one car from the same agent. Do you want to create bundle for your requests?",this.state.agentForBundle.map((function(t,a){return c.a.createElement("label",{className:"checkbox-inline"},c.a.createElement("input",{type:"checkbox",onChange:function(a){return e.addToBundle(t,a)}}),t)}))),c.a.createElement(Ne.a,null,c.a.createElement(P.a,{color:"primary",onClick:function(t){return e.createRequests(!0)}},"Create bundle")," ",c.a.createElement(P.a,{color:"secondary",onClick:function(t){return e.createRequests(!1)}},"Cancel"))),c.a.createElement(D.NotificationContainer,null));return this.rolesMatched()?t:c.a.createElement(d.a,{to:"/ads"})}}]),a}(k.RoleAwareComponent),Re=a(239),ze=a.n(Re),Ie=[{dataField:"userId",text:"Customer"},{dataField:"startDate",text:"Start"},{dataField:"endDate",text:"End"},{dataField:"state",text:"Status"}],Pe=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var l;Object(n.a)(this,a),(l=t.call(this,e)).createReport=function(e){l.setState({showModal:!0,tempId:e})},l.sendReport=function(e){e.preventDefault();var t;if(t=l.mileageValidation(l.state.mileage),l.textValidation(l.state.text),t){var a=localStorage.getItem("ulogovan"),n="Bearer ".concat(a),r={text:l.state.text,mileage:l.state.mileage,endDate:l.state.endDate};C()({method:"post",url:"https://localhost:8082/orders/report/"+l.state.tempId,data:r,headers:{Authorization:n}}).then((function(e){console.log(e.data.status),200===e.status&&(l.setState({showModal:!1,mileage:"",text:"",tempId:""}),D.NotificationManager.success("Successfully created!","",3e3))}),(function(e){console.log(e)}))}},l.fillRequests=function(){sessionStorage.getItem("basket");var e=localStorage.getItem("ulogovan"),t="Bearer ".concat(e);C()({method:"get",url:"https://localhost:8082/orders/request/"+!1,headers:{Authorization:t}}).then((function(e){if(200===e.data.status){console.log(e.data.entity);var t=JSON.parse(e.data.entity);l.transformResponse(t)}else D.NotificationManager.info(e.data.entity,"",3e3)}),(function(e){console.log(e)}))},l.modifyRequest=function(e,t){sessionStorage.getItem("basket");var a=localStorage.getItem("ulogovan"),n="Bearer ".concat(a);C()({method:"put",url:"https://localhost:8082/orders/request/"+e+"/"+t,headers:{Authorization:n}}).then((function(e){200===e.data.status?l.fillRequests():D.NotificationManager.error(e.data.entity,"",3e3)}),(function(e){console.log(e)}))},l.transformResponse=function(e){for(var t=0;t<e.length;t++){var a=l.getDateString(e[t].startDate),n=l.getDateString(e[t].endDate);e[t].startDate=a,e[t].endDate=n}l.setState({requests:e})},l.toggle=function(){l.setState({openModal:!l.state.openModal})},l.expandRow={renderer:function(e){return c.a.createElement("div",null,c.a.createElement(q.a,{responsive:!0},c.a.createElement("tbody",null,e.cars.map((function(t,a){return c.a.createElement("tr",{key:a,className:"crow"},c.a.createElement("td",{className:"crow"},t.make),c.a.createElement("td",{className:"crow"},t.model),c.a.createElement("td",{className:"crow"},t.fuel),c.a.createElement("td",{className:"crow"},t.price),"PAID"===e.state&&l.compareDates(e.endDate)&&c.a.createElement(P.a,{color:"primary",size:"md",onClick:function(e){return l.createReport(t.id)}}," ","Add report "),"                    ")})))),"PENDING"===e.state&&c.a.createElement(P.a,{color:"primary",onClick:function(t){return l.modifyRequest(e.id,!0)}},"Accept")," ","   ","PENDING"===e.state&&c.a.createElement(P.a,{color:"primary",onClick:function(t){return l.modifyRequest(e.id,!1)}},"Decline"))},showExpandColumn:!0},l.modifyRequest=l.modifyRequest.bind(Object(r.a)(l)),l.state={requests:[],hideEdit:!0,checkedAds:[],bundle:!1,openModal:!1,agentForBundle:[],showModal:!1,text:"",mileage:"",tempId:"",today:""};var o=new Array;return o.push(localStorage.getItem("role")),console.log("KONS",o),l.userRoles=o,l.allowedRoles=["ROLE_SELLER","ROLE_CUSTOMER"],l.fillRequests=l.fillRequests.bind(Object(r.a)(l)),l.toggle=l.toggle.bind(Object(r.a)(l)),l.transformResponse=l.transformResponse.bind(Object(r.a)(l)),l.getDateString=l.getDateString.bind(Object(r.a)(l)),l}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Date.now();this.setState({today:e}),this.fillRequests()}},{key:"mileageValidation",value:function(e){e=(e=(e=(e=e.replace(/</g,"")).replace(/>/g,"")).replace(/script/g,"")).replace(/alert/g,""),this.setState({mileage:e});var t=e;return""===t?(this.setState({textMileageValidation:"Ovo polje ne moze biti prazno"}),!1):"-"===t||t<0?(this.setState({textMileageValidation:"Kilometraza mora biti pozitivan broj!"}),!1):(this.setState({textMileageValidation:""}),!0)}},{key:"textValidation",value:function(e){return e=(e=(e=(e=e.replace(/</g,"")).replace(/>/g,"")).replace(/script/g,"")).replace(/alert/g,""),this.setState({text:e}),!0}},{key:"getDateString",value:function(e){var t=new Date(e),a=t.getMonth()+1,n=t.getDate()+"."+a+"."+t.getFullYear()+", ",l=t.getHours(),r=t.getMinutes();return l<10&&(l="0"+l),r<10&&(r="0"+r),n=n+l+":"+r}},{key:"compareDates",value:function(e){var t=this.state.today;return this.getDateString(t)>e}},{key:"render",value:function(){var e=this,t=(localStorage.getItem("role"),c.a.createElement("div",{className:"animated fadeIn content"},c.a.createElement(O.a,null,c.a.createElement(R.a,null,c.a.createElement(ze.a,{keyField:"id",data:this.state.requests,columns:Ie,expandRow:this.expandRow}))),c.a.createElement(ie.a,{modalClassName:"modal-register",isOpen:this.state.showModal},c.a.createElement("div",{className:"modal-header no-border-header text-center"},c.a.createElement("button",{"aria-label":"Close",className:"close","data-dismiss":"modal",type:"button",onClick:function(t){return e.setState({showModal:!1})}},c.a.createElement("span",{"aria-hidden":!0},"x"))),c.a.createElement("div",{className:"modal-body"},c.a.createElement(F.a,{onSubmit:this.sendReport},c.a.createElement(L.a,null,c.a.createElement(Y.a,null,"Mileage:"),c.a.createElement(B.a,{type:"number",className:"form-control",value:this.state.mileage,onChange:function(t){return e.mileageValidation(t.target.value)}}),c.a.createElement("p",{style:{color:"red"}}," ",this.state.textMileageValidation," ")),c.a.createElement(L.a,null,c.a.createElement(Y.a,null,"Description:"),c.a.createElement("textarea",{cols:"30",className:"form-control",value:this.state.text,onChange:function(t){return e.textValidation(t.target.value)}})),c.a.createElement(P.a,{block:!0,className:"btn-round",color:"info"},"Confirm")))),c.a.createElement(D.NotificationContainer,null)));return this.rolesMatched()?t:c.a.createElement(d.a,{to:"/ads"})}}]),a}(k.RoleAwareComponent),Ve=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var l;Object(n.a)(this,a),(l=t.call(this,e)).getReviews=function(){var e=localStorage.getItem("ulogovan"),t="Bearer ".concat(e);C()({method:"get",url:"https://localhost:8082/advertisement/review",headers:{Authorization:t}}).then((function(e){var t=e.data;t.sort((function(e,t){return t.date-e.date})),l.setState({reviews:t})}),(function(e){console.log(e)}))},l.state={reviews:[]};var o=[];return o.push(localStorage.getItem("role")),l.userRoles=o,l.allowedRoles=["ROLE_ADMIN"],l.getReviews=l.getReviews.bind(Object(r.a)(l)),l.sendRequest=l.sendRequest.bind(Object(r.a)(l)),l}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getReviews()}},{key:"getDateString",value:function(e){var t=new Date(e),a=t.getMonth()+1,n=t.getDate()+"."+a+"."+t.getFullYear()+", ",l=t.getHours(),r=t.getMinutes();return l<10&&(l="0"+l),r<10&&(r="0"+r),n=n+l+":"+r}},{key:"sendRequest",value:function(e,t){var a=this,n="APPROVED";e||(n="REJECTED");var l=localStorage.getItem("ulogovan"),r="Bearer ".concat(l);C()({method:"put",url:"https://localhost:8082/advertisement/review/"+t,headers:{Authorization:r},data:{state:n}}).then((function(t){e?D.NotificationManager.success("Successfully approved","",3e3):D.NotificationManager.success("Successfully rejected!","",3e3),a.getReviews()}),(function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=c.a.createElement("div",{className:"content"},c.a.createElement("section",{className:"bar pt-0",hidden:this.state.hideAll},c.a.createElement("div",{className:"row"},this.state.reviews.map((function(t){return c.a.createElement(O.a,{style:{width:"18rem",textAlign:"left",alignItems:"left",margin:9},key:t.id,"data-key":t.id},c.a.createElement(M.a,null,c.a.createElement("h5",null,c.a.createElement("strong",null,t.username))),c.a.createElement(R.a,null,e.getDateString(t.date),c.a.createElement("br",null),c.a.createElement(Y.a,{style:{color:"black",fontSize:"12",marginTop:"0.5rem"}},t.text),c.a.createElement("br",null)),c.a.createElement(V.a,null,c.a.createElement(P.a,{color:"primary",onClick:function(){return e.sendRequest(!0,t.id)}},"Approve")," ",c.a.createElement(P.a,{color:"danger",onClick:function(){return e.sendRequest(!1,t.id)}},"Reject")))})))),c.a.createElement(D.NotificationContainer,null));return this.rolesMatched()?t:c.a.createElement(d.a,{to:"/ads"})}}]),a}(k.RoleAwareComponent),Fe=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var l;Object(n.a)(this,a),(l=t.call(this,e)).state={};var o=new Array;return o.push(localStorage.getItem("role")),l.userRoles=o,l.allowedRoles=["ROLE_SELLER"],l.getColor=l.getColor.bind(Object(r.a)(l)),l.saznajVise=l.saznajVise.bind(Object(r.a)(l)),l.getImage=l.getImage.bind(Object(r.a)(l)),l}return Object(l.a)(a,[{key:"getColor",value:function(e){return 0===e?"gold":1===e?"silver":2===e?"#CD7F32":void 0}},{key:"getImage",value:function(e,t){return"crossed"===t?e.image:e.images[0].imageUrl}},{key:"saznajVise",value:function(e){window.location.assign("showAd/"+e)}},{key:"render",value:function(){var e=this,t=c.a.createElement("div",{className:"content"},c.a.createElement("section",{className:"bar pt-0"},c.a.createElement("div",{className:"row"},this.props.cars.map((function(t,a){return c.a.createElement(le.c,{style:{backgroundColor:e.getColor(a),width:"95%"},key:t.id,"data-key":t.id},c.a.createElement("br",null),c.a.createElement("h3",{style:{textAlign:"center"},className:"font-weight-bold"},t.model," ",t.make),c.a.createElement("div",{style:{width:"100%",height:"13rem"}},c.a.createElement("img",{style:{maxWidth:"99%",maxHeight:"12rem",display:"block",marginLeft:"auto",marginRight:"auto"},src:e.getImage(t,e.props.typeCol),alt:"Fotografija",top:!0,hover:!0,overlay:"white-slight"})),c.a.createElement("div",null,c.a.createElement("div",{style:{backgroundColor:"white",padding:5}},c.a.createElement("br",null),c.a.createElement(le.d,{tag:"h6"},"Rating: \xa0 ",c.a.createElement(Ee.a,{style:{justifyContent:"right"},rating:t.raiting,starRatedColor:"orange",numberOfStars:5,name:"rating",starDimension:"20px",starSpacing:"5px"}),"  "),c.a.createElement("h6",{hidden:"comments"!==e.props.typeCol},"Comments: ",t.commentsNumber),c.a.createElement("h6",{hidden:"rating"!==e.props.typeCol},"\xa0"),c.a.createElement("h6",{hidden:"crossed"!==e.props.typeCol},"Kilometers crossed: ",t.mileageLimit),c.a.createElement(y.a,null,c.a.createElement(S.a,null,c.a.createElement(le.d,{tag:"h6"}," Car class: ",c.a.createElement("p",{style:{color:"red"}},t.carClass),"  "),c.a.createElement(le.d,{tag:"h6"}," Daily price: ",c.a.createElement("p",{style:{color:"red"}},t.priceDay),"  "),c.a.createElement(le.d,{tag:"h6"}," Mileage: ",c.a.createElement("p",{style:{color:"red"}},t.mileage),"  "),c.a.createElement(le.d,{tag:"h6"}," Fuel type: ",c.a.createElement("p",{style:{color:"red"}},t.fuel)," ")),c.a.createElement(S.a,null,c.a.createElement(le.d,{tag:"h6"}," Kids seats: ",c.a.createElement("p",{style:{color:"red"}},t.kidsSeats),"  "),c.a.createElement(le.d,{tag:"h6"}," Collision Damage Waiver: ",c.a.createElement("i",{style:{color:"red"},hidden:!t.insurance,className:"fa fa-check"}),c.a.createElement("i",{style:{color:"red"},hidden:t.insurance,className:"fa fa-close"}),"  "),c.a.createElement(le.d,{tag:"h6"}," Mileage limit: ",c.a.createElement("p",{style:{color:"red"}},t.mileageLimit),"  "),c.a.createElement(le.d,{tag:"h6"}," Gearbox type: ",c.a.createElement("p",{style:{color:"red"}},t.gearbox),"  "))),c.a.createElement(P.a,{color:"primary",size:"md",onClick:function(a){return e.saznajVise(t.id)}},"Details"))))})))));return this.rolesMatched()?t:c.a.createElement(d.a,{to:"/ads"})}}]),a}(k.RoleAwareComponent),Le="https://localhost:8082/",Be=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var l;Object(n.a)(this,a),(l=t.call(this,e)).getUser=function(){var e=localStorage.getItem("ulogovan"),t="Bearer ".concat(e);C()({method:"get",url:Le+"authpoint/user/current",headers:{Authorization:t}}).then((function(e){console.log(e.data),l.setState({user:e.data})}),(function(e){console.log(e)}))},l.validatePassword=function(){var e=!1,t=!1,a=!1;if(""===l.state.password)l.setState({passErrorText:"This field is required.",formErrorText:""});else if(l.state.password.length<8)l.setState({passErrorText:"Minimum length of password is 8 characters.",formErrorText:""});else{var n;for(n=0;n<l.state.password.length;n++)isNaN(1*l.state.password.charAt(n))?l.state.password.charAt(n)!==l.state.password.charAt(n).toLowerCase()?l.state.password.charAt(n)!==l.state.password.charAt(n).toUpperCase()||(e=!0):t=!0:a=!0;if(a?t?e?l.setState({passErrorText:"",formValid:!1,formErrorText:""}):l.setState({passErrorText:"Password must contain at least one capital letter.",formErrorText:""}):l.setState({passErrorText:"Password must contain at least one lowercase letter.",formErrorText:""}):l.setState({passErrorText:"Password must contain at least one digit.",formErrorText:""}),""!==l.state.username){var r=l.state.user.username.toLowerCase();l.state.password.toLowerCase().includes(r)&&l.setState({passErrorText:"Password can not contain username.",formErrorText:""})}}},l.checkPasswordMatching=function(e){l.setState({password2:e.target.value}),l.state.password!==e.target.value?l.setState({formValid:!0,matchErrorText:"Password doesn't match."}):l.setState({formValid:!1,matchErrorText:"",password:e.target.value})},l.state={user:{},hideChangePass:!0,oldPassword:"",password:"",password2:"",passErrorText:"",bestRated:[],mostCrossed:[],mostCommented:[]};var o=[];return o.push(localStorage.getItem("role")),l.userRoles=o,l.allowedRoles=["ROLE_CUSTOMER","ROLE_SELLER","ROLE_ADMIN"],l.getUser=l.getUser.bind(Object(r.a)(l)),l.changePass=l.changePass.bind(Object(r.a)(l)),l.validatePassword=l.validatePassword.bind(Object(r.a)(l)),l.getStatistics=l.getStatistics.bind(Object(r.a)(l)),l.getMostCommented=l.getMostCommented.bind(Object(r.a)(l)),l.getBestRated=l.getBestRated.bind(Object(r.a)(l)),l.getMostCrossed=l.getMostCrossed.bind(Object(r.a)(l)),l}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getUser(),"ROLE_SELLER"===localStorage.getItem("role")&&this.getStatistics()}},{key:"changePass",value:function(){var e=this,t=localStorage.getItem("ulogovan"),a="Bearer ".concat(t),n={oldPassword:this.state.oldPassword,newPassword:this.state.password};console.log(n),C()({method:"put",url:Le+"authpoint/auth/changePassword",headers:{Authorization:a},data:n}).then((function(t){200===t.status?(D.NotificationManager.info("Password changed."),e.setState({password:"",oldPassword:"",password2:""})):D.NotificationManager.info("Failed to change password.")}),(function(e){console.log(e)}))}},{key:"getStatistics",value:function(){this.getMostCommented(),this.getBestRated(),this.getMostCrossed()}},{key:"getMostCommented",value:function(){var e=this,t=localStorage.getItem("ulogovan"),a="Bearer ".concat(t);C()({method:"get",url:Le+"advertisement/car/statistics/comments",headers:{Authorization:a}}).then((function(t){e.setState({mostCommented:t.data})}),(function(e){console.log(e)}))}},{key:"getBestRated",value:function(){var e=this,t=localStorage.getItem("ulogovan"),a="Bearer ".concat(t);C()({method:"get",url:Le+"advertisement/car/statistics/rating",headers:{Authorization:a}}).then((function(t){e.setState({bestRated:t.data})}),(function(e){console.log(e)}))}},{key:"getMostCrossed",value:function(){var e=this,t=localStorage.getItem("ulogovan"),a="Bearer ".concat(t);C()({method:"get",url:Le+"orders/car/statistics",headers:{Authorization:a}}).then((function(t){e.setState({mostCrossed:t.data})}),(function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=c.a.createElement("div",{className:"content"},c.a.createElement("h4",null,this.state.user.username),c.a.createElement(y.a,null,c.a.createElement(S.a,{xs:"12",md:"6",xl:"6"},c.a.createElement(Y.a,{hidden:"ROLE_SELLER"!==localStorage.getItem("role")},"Company name: ",this.state.user.company),c.a.createElement("br",null),c.a.createElement(Y.a,{hidden:"ROLE_CUSTOMER"!==localStorage.getItem("role")},"Name and surname: ",this.state.user.name," ",this.state.user.surname),c.a.createElement("br",null),c.a.createElement(Y.a,null,"Email: ",this.state.user.email),c.a.createElement("br",null),c.a.createElement(Y.a,{hidden:"ROLE_ADMIN"===localStorage.getItem("role")},"Address: ",this.state.user.address),c.a.createElement("br",null),c.a.createElement(Y.a,{hidden:"ROLE_ADMIN"===localStorage.getItem("role")},"City: ",this.state.user.city),c.a.createElement(P.a,{hidden:!this.state.hideChangePass,style:{width:"auto"},size:"sm",onClick:function(){return e.setState({hideChangePass:!1})},block:!0,color:"info"},"Change password")),c.a.createElement(S.a,{xs:"12",md:"6",xl:"6"},c.a.createElement(L.a,{hidden:this.state.hideChangePass},c.a.createElement(se.a,{className:"mb-3"},c.a.createElement(B.a,{type:"password",placeholder:"Old password",value:this.state.oldPassword,onChange:function(t){return e.setState({oldPassword:t.target.value})}})),c.a.createElement(se.a,{className:"mb-3"},c.a.createElement(B.a,{type:"password",placeholder:"New password",autoComplete:"new-password",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})},onBlur:this.validatePassword}),c.a.createElement(H.a,{color:"danger"},this.state.passErrorText)),c.a.createElement(se.a,{className:"mb-4"},c.a.createElement(B.a,{type:"password",placeholder:"Repeat new password",autoComplete:"new-password",value:this.state.password2,onChange:this.checkPasswordMatching}),c.a.createElement(H.a,{color:"danger"},this.state.matchErrorText)),c.a.createElement(se.a,null,c.a.createElement(P.a,{type:"submit",size:"sm",color:"primary",onClick:function(t){return e.changePass()}},c.a.createElement("i",{className:"fa fa-dot-circle-o"})," Change"),c.a.createElement(P.a,{type:"reset",size:"sm",color:"danger",onClick:function(t){return e.setState({hideChangePass:!0,password:"",oldPassword:""})}},c.a.createElement("i",{className:"fa fa-ban"})," Cancel"))))),c.a.createElement(y.a,{hidden:"ROLE_SELLER"!==localStorage.getItem("role")},c.a.createElement(S.a,{md:"4",xl:"4",xs:"12"},c.a.createElement("h4",null,c.a.createElement("i",{className:"nc-icon nc-delivery-fast",style:{color:"red"}})," The most crossed kilometers cars"),c.a.createElement(Fe,{cars:this.state.mostCrossed,typeCol:"crossed"})),c.a.createElement(S.a,{md:"4",xl:"4",xs:"12"},c.a.createElement("h4",null,c.a.createElement("i",{className:"fa fa-commenting-o",style:{color:"blue"}})," The most commented cars"),c.a.createElement(Fe,{cars:this.state.mostCommented,typeCol:"comments"})),c.a.createElement(S.a,{md:"4",xl:"4",xs:"12"},c.a.createElement("h4",null,c.a.createElement("i",{className:"fa fa-star",style:{color:"gold"}})," The best-rated cars"),c.a.createElement(Fe,{cars:this.state.bestRated,typeCol:"rating"}))),c.a.createElement(D.NotificationContainer,null));return this.rolesMatched()?t:c.a.createElement(d.a,{to:"/ads"})}}]),a}(k.RoleAwareComponent),Ue=a(216),Ke="https://localhost:8082/";function qe(e){var t=e.certificate;return c.a.createElement("tr",{key:t.id.toString()},c.a.createElement("td",null,t.agentId),c.a.createElement("td",null,t.startDate),c.a.createElement("td",null,t.endDate),c.a.createElement("td",null,c.a.createElement(Ue.a,{className:"mr-1",href:"#",color:"info"},t.state)),c.a.createElement("td",null,c.a.createElement(P.a,{color:"danger",onClick:function(){return e.displayCars(t.id.toString())}},"CARS")),"RESERVED"===t.state&&c.a.createElement("td",null,c.a.createElement(P.a,{color:"danger",onClick:function(){return e.payForCar(t.id.toString())}},"PAY")),"RESERVED"===t.state&&c.a.createElement("td",null,c.a.createElement(P.a,{color:"danger",onClick:function(){return e.openModal(t)}},"SEND MESSAGE")))}var _e,We,Ye=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var l;Object(n.a)(this,a),(l=t.call(this,e)).sendMessage=function(){var e=localStorage.getItem("ulogovan"),t="Bearer ".concat(e),a={receiverUsername:l.state.to,subject:l.state.subject,text:l.state.message,timeSent:new Date};console.log(a),C()({method:"post",url:Ke+"message/message",headers:{Authorization:t},data:a}).then((function(e){200===e.status?D.NotificationManager.info("Message sent."):D.NotificationManager.info("Failed to send message."),l.clear(),l.togglePrimary()}),(function(e){console.log(e)}))},l.clear=function(){l.setState({message:"",to:"",subject:""})},l.togglePrimary=function(e){l.state.primary?l.clear():l.setState({to:e.agentUsername}),l.setState({primary:!l.state.primary})},l.displayAllOrders=function(){var e=localStorage.getItem("ulogovan"),t="Bearer ".concat(e);C()({method:"get",url:Ke+"orders/request/true",headers:{Authorization:t}}).then((function(e){if(200==e.data.status){var t=JSON.parse(e.data.entity);l.transformResponse(t)}else D.NotificationManager.info("No orders requested!","",3e3)}),(function(e){console.log(e)}))},l.displayCars=function(e){},l.payForCar=function(e){var t=localStorage.getItem("ulogovan"),a="Bearer ".concat(t);C()({method:"put",url:Ke+"orders/request/pay/"+e,headers:{Authorization:a}}).then((function(e){e.data?(l.displayAllOrders(),D.NotificationManager.success("Successfully paid!","",3e3)):D.NotificationManager.error("Your payment is canceled!","",3e3)}),(function(e){console.log(e)}))},l.transformResponse=function(e){for(var t=0;t<e.length;t++){var a=l.getDateString(e[t].startDate),n=l.getDateString(e[t].endDate);e[t].startDate=a,e[t].endDate=n}l.setState({orders:e,showCertificates:e.slice(0,5)})},l.state={orders:[],showCertificates:[],activePage:1,primary:!1,subject:"",to:"",message:""};var o=[];return o.push(localStorage.getItem("role")),l.userRoles=o,l.allowedRoles=["ROLE_CUSTOMER"],l.payForCar=l.payForCar.bind(Object(r.a)(l)),l.displayCars=l.displayCars.bind(Object(r.a)(l)),l.displayAllOrders=l.displayAllOrders.bind(Object(r.a)(l)),l.transformResponse=l.transformResponse.bind(Object(r.a)(l)),l}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.displayAllOrders()}},{key:"getDateString",value:function(e){var t=new Date(e),a=t.getMonth()+1,n=t.getDate()+"."+a+"."+t.getFullYear()+", ",l=t.getHours(),r=t.getMinutes();return l<10&&(l="0"+l),r<10&&(r="0"+r),n=n+l+":"+r}},{key:"handlePageChange",value:function(e){var t=5*(e-1);this.setState({activePage:e,showCertificates:this.state.orders.slice(t,t+5)})}},{key:"render",value:function(){var e=this,t=this.state.orders.length,a=Array.from(Array(Math.ceil(t/5)).keys()),n=c.a.createElement("div",{className:"animated fadeIn content"},c.a.createElement(y.a,null,c.a.createElement(S.a,{xl:11},c.a.createElement(O.a,null,c.a.createElement(M.a,null,c.a.createElement("i",{className:"fa fa-align-justify"})," Orders"),c.a.createElement(R.a,null,c.a.createElement(q.a,{responsive:!0,hover:!0,striped:!0},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{scope:"col"},"Agent"),c.a.createElement("th",{scope:"col"},"Start date"),c.a.createElement("th",{scope:"col"},"End date"),c.a.createElement("th",{scope:"col"},"Status"),c.a.createElement("th",{scope:"col"},"Cars"))),c.a.createElement("tbody",null,this.state.showCertificates.map((function(t,a){return c.a.createElement(qe,{key:a,certificate:t,payForCar:e.payForCar,displayCars:e.displayCars,openModal:e.togglePrimary})})))),c.a.createElement("nav",null,c.a.createElement(J.a,null,c.a.createElement(X.a,null,c.a.createElement($.a,{disabled:1===this.state.activePage,previous:!0,tag:"button",onClick:function(t){return e.handlePageChange(e.state.activePage-1)}})),a.map((function(t){return c.a.createElement("div",null,c.a.createElement(X.a,{active:!0,hidden:e.state.activePage!==t+1},c.a.createElement($.a,{tag:"button"},t+1)),c.a.createElement(X.a,{hidden:e.state.activePage===t+1},c.a.createElement($.a,{tag:"button",onClick:function(a){return e.handlePageChange(t+1)}},t+1)))})),c.a.createElement(X.a,null,c.a.createElement($.a,{disabled:this.state.activePage===Math.ceil(t/5),next:!0,tag:"button",onClick:function(t){return e.handlePageChange(e.state.activePage+1)}})))))))),c.a.createElement(ie.a,{isOpen:this.state.primary,toggle:this.togglePrimary,className:"modal-primary "+this.props.className},c.a.createElement(we.a,null,"Send message"),c.a.createElement(Te.a,null,c.a.createElement(F.a,null,c.a.createElement(se.a,{className:"mb-3"},c.a.createElement(ce.a,null,c.a.createElement(me.a,null,"Subject:")),c.a.createElement(B.a,{type:"text",onChange:function(t){return e.setState({subject:t.target.value})},value:this.state.subject})),c.a.createElement(se.a,{className:"mb-3"},c.a.createElement(me.a,null,"Message:"),c.a.createElement(B.a,{type:"textarea",onChange:function(t){return e.setState({message:t.target.value})},value:this.state.message})))),c.a.createElement(Ne.a,null,c.a.createElement(P.a,{color:"primary",onClick:this.sendMessage},"Send")," ",c.a.createElement(P.a,{color:"secondary",onClick:this.togglePrimary},"Cancel"))),c.a.createElement(D.NotificationContainer,null));return this.rolesMatched()?n:c.a.createElement(d.a,{to:"/ads"})}}]),a}(k.RoleAwareComponent),He=a(544),Ze=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var l;Object(n.a)(this,a),(l=t.call(this,e)).loadMessages=function(){var e=localStorage.getItem("ulogovan"),t="Bearer ".concat(e);C()({method:"get",url:"https://localhost:8082/message/message",headers:{Authorization:t}}).then((function(e){if(200===e.status){var t,a=Object(He.a)(e.data);try{for(a.s();!(t=a.n()).done;){t.value.active=!1}}catch(n){a.e(n)}finally{a.f()}l.setState({messages:e.data})}else D.NotificationManager.info("Failed to load message.")}),(function(e){console.log(e)}))},l.togglePrimary=function(){!0===l.state.primary&&l.clear(),l.setState({primary:!l.state.primary})},l.reply=function(e,t,a){console.log(e,t,a),l.setState({to:e,subject:t,from:a}),l.togglePrimary()},l.sendMessage=function(){var e=localStorage.getItem("ulogovan"),t="Bearer ".concat(e),a={receiverUsername:l.state.to,senderUsername:l.state.from,subject:l.state.subject,text:l.state.message,timeSent:new Date};C()({method:"post",url:"https://localhost:8082/message/message",headers:{Authorization:t},data:a}).then((function(e){200===e.status?D.NotificationManager.info("Message sent."):D.NotificationManager.info("Failed to send message."),l.clear(),l.togglePrimary()}),(function(e){console.log(e)}))},l.clear=function(){l.setState({message:"",to:"",subject:"",from:""})},l.showRow=function(e,t){console.log(t);var a,n=l.state.messages,r=Object(He.a)(n);try{for(r.s();!(a=r.n()).done;){var o=a.value;o.id===t&&(!1===o.active?o.active=!0:o.active=!1)}}catch(i){r.e(i)}finally{r.f()}l.setState({messages:n})},l.state={messages:[],modal:!1,primary:!1,subject:"",to:"",message:"",from:""};var r=new Array;return r.push(localStorage.getItem("role")),l.userRoles=r,l.allowedRoles=["ROLE_SELLER","ROLE_CUSTOMER"],l}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.loadMessages()}},{key:"messageValidation",value:function(e){e=(e=(e=(e=e.replace(/</g,"")).replace(/>/g,"")).replace(/script/g,"")).replace(/alert/g,""),this.setState({message:e})}},{key:"render",value:function(){var e=this,t=this.state.messages.map((function(t){return c.a.createElement(c.a.Fragment,{key:t.id},c.a.createElement("tr",{onClick:function(a){return e.showRow(a,t.id)}},c.a.createElement("td",null,t.senderUsername),c.a.createElement("td",null,t.subject),c.a.createElement("td",null,new Date(t.timeSent).toLocaleDateString()+" ",new Date(t.timeSent).toLocaleTimeString()),c.a.createElement("td",null,c.a.createElement("button",{onClick:function(a){e.reply(t.senderUsername,t.subject,t.receiverUsername)},className:"btn btn-primary"},"Reply"))),!0===t.active&&c.a.createElement("tr",null,c.a.createElement("td",{style:{border:"none"},className:"no-border"},t.text)))})),a=c.a.createElement("div",{className:"animated fadeIn content"},c.a.createElement(O.a,null,c.a.createElement(R.a,{className:"p-0"},c.a.createElement("table",{className:"table"},c.a.createElement("tbody",null,t)))),c.a.createElement(ie.a,{isOpen:this.state.primary,toggle:this.togglePrimary,className:"modal-primary "+this.props.className},c.a.createElement(we.a,null,"Send message"),c.a.createElement(Te.a,null,c.a.createElement(F.a,null,c.a.createElement(se.a,{className:"mb-3"},c.a.createElement(ce.a,null,c.a.createElement(me.a,null,"To:")),c.a.createElement(B.a,{type:"text",value:this.state.to,disabled:!0,autoComplete:"username"})),c.a.createElement(se.a,{className:"mb-3"},c.a.createElement(ce.a,null,c.a.createElement(me.a,null,"Subject:")),c.a.createElement(B.a,{type:"text",value:this.state.subject,disabled:!0})),c.a.createElement(se.a,{className:"mb-3"},c.a.createElement(me.a,null,"Message:"),c.a.createElement(B.a,{type:"textarea",onChange:function(t){return e.messageValidation(t.target.value)},value:this.state.message})))),c.a.createElement(Ne.a,null,c.a.createElement(P.a,{color:"primary",onClick:this.sendMessage},"Send")," ",c.a.createElement(P.a,{color:"secondary",onClick:this.togglePrimary},"Cancel"))),c.a.createElement(D.NotificationContainer,null));return this.rolesMatched()?a:c.a.createElement(d.a,{to:"/ads"})}}]),a}(k.RoleAwareComponent),Ge=[{authorize:["ROLE_SELLER","ROLE_ADMIN"],path:"/codebook",name:"Codebook",icon:"nc-icon nc-bank",component:G,layout:"/admin"},{authorize:["ROLE_SELLER","ROLE_ADMIN","ROLE_CUSTOMER"],path:"/profile",name:"Profile",icon:"fa fa-user-circle",component:Be},{authorize:["ROLE_SELLER","ROLE_ADMIN"],path:"/pricelist",name:"Pricelist",icon:"nc-icon nc-tile-56",component:ee,layout:"/admin"},{authorize:["fsg"],path:"/ads",name:"Ads",icon:"nc-icon nc-caps-small",component:Se,layout:"/admin"},{authorize:["fsg"],attributes:{hidden:!0},path:"/showad/:id",name:"Ad Details",icon:"nc-icon nc-caps-small",component:Me,layout:"/admin"},{authorize:["ROLE_SELLER","ROLE_CUSTOMER"],path:"/newad",name:"New Ad",icon:"nc-icon nc-caps-small",component:ae,layout:"/admin"},{authorize:["ROLE_ADMIN"],path:"/dashboard",name:"Dashboard",icon:"nc-icon nc-bank",component:w,layout:"/admin"},{authorize:["ROLE_SELLER","ROLE_CUSTOMER"],path:"/ad",name:"Advertisement",icon:"nc-icon nc-tile-56",component:U},{authorize:["ROLE_CUSTOMER"],path:"/basket",name:"Your basket",component:Ae},{authorize:["ROLE_SELLER","ROLE_CUSTOMER"],path:"/requests",name:"Requests",component:Pe},{authorize:["ROLE_ADMIN"],path:"/comments",name:"Comments",component:Ve},{authorize:["ROLE_CUSTOMER"],path:"/orders",name:"Orders",component:Ye},{authorize:["ROLE_CUSTOMER","ROLE_SELLER"],path:"/messages",name:"Messages",component:Ze},{authorize:["fgs"],path:"/validation",name:"Validation",component:function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var l;return Object(n.a)(this,a),(l=t.call(this,e)).state={},l}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=window.location.href.toString().split("validation/"),t=e[1];if(t&&""!==t){var a="Bearer ".concat(t);console.log("https://localhost:8082/","url",e,"arr",t,"token"),C()({method:"get",url:"https://localhost:8082/authpoint/user/verify",headers:{Authorization:a}}).then((function(e){200===e.status?D.NotificationManager.info("Registration confirmed."):D.NotificationManager.error("Failed to validate account.")}),(function(e){console.log(e)}))}}},{key:"render",value:function(){return c.a.createElement("div",{className:"animated fadeIn content"},c.a.createElement(O.a,null,c.a.createElement(R.a,null)),c.a.createElement(D.NotificationContainer,null))}}]),a}(c.a.Component)}],Je=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var l;return Object(n.a)(this,a),(l=t.call(this,e)).state={isOpen:!1,dropdownOpen:!1,color:"transparent"},l.toggle=l.toggle.bind(Object(r.a)(l)),l.dropdownToggle=l.dropdownToggle.bind(Object(r.a)(l)),l.sidebarToggle=c.a.createRef(),l}return Object(l.a)(a,[{key:"toggle",value:function(){this.state.isOpen?this.setState({color:"transparent"}):this.setState({color:"dark"}),this.setState({isOpen:!this.state.isOpen})}},{key:"dropdownToggle",value:function(e){this.setState({dropdownOpen:!this.state.dropdownOpen})}},{key:"getBrand",value:function(){var e="Default Brand";return Ge.map((function(t,a){return-1!==window.location.href.indexOf(t.path)&&(e=t.name),null})),e}},{key:"openSidebar",value:function(){document.documentElement.classList.toggle("nav-open"),this.sidebarToggle.current.classList.toggle("toggled")}},{key:"updateColor",value:function(){window.innerWidth<993&&this.state.isOpen?this.setState({color:"dark"}):this.setState({color:"transparent"})}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updateColor.bind(this))}},{key:"componentDidUpdate",value:function(e){window.innerWidth<993&&e.history.location.pathname!==e.location.pathname&&-1!==document.documentElement.className.indexOf("nav-open")&&(document.documentElement.classList.toggle("nav-open"),this.sidebarToggle.current.classList.toggle("toggled"))}},{key:"render",value:function(){var e=this;return c.a.createElement(h.a,{color:-1!==this.props.location.pathname.indexOf("full-screen-maps")?"dark":this.state.color,expand:"lg",className:-1!==this.props.location.pathname.indexOf("full-screen-maps")?"navbar-absolute fixed-top":"navbar-absolute fixed-top "+("transparent"===this.state.color?"navbar-transparent ":"")},c.a.createElement(g.a,{fluid:!0},c.a.createElement("div",{className:"navbar-wrapper"},c.a.createElement("div",{className:"navbar-toggle"},c.a.createElement("button",{type:"button",ref:this.sidebarToggle,className:"navbar-toggler",onClick:function(){return e.openSidebar()}},c.a.createElement("span",{className:"navbar-toggler-bar bar1"}),c.a.createElement("span",{className:"navbar-toggler-bar bar2"}),c.a.createElement("span",{className:"navbar-toggler-bar bar3"}))),c.a.createElement(p.a,{href:"/"},this.getBrand())),c.a.createElement(E.a,{onClick:this.toggle},c.a.createElement("span",{className:"navbar-toggler-bar navbar-kebab"}),c.a.createElement("span",{className:"navbar-toggler-bar navbar-kebab"}),c.a.createElement("span",{className:"navbar-toggler-bar navbar-kebab"})),c.a.createElement(f.a,{isOpen:this.state.isOpen,navbar:!0,className:"justify-content-end"},c.a.createElement(v.a,{navbar:!0},!localStorage.getItem("role")&&c.a.createElement(p.a,{onClick:this.props.openModal},c.a.createElement("i",{class:"nc-icon nc-single-02"}),"Login"),"ROLE_CUSTOMER"===localStorage.getItem("role")&&c.a.createElement(b.a,null,c.a.createElement(u.b,{to:"/basket",className:"nav-link btn-rotate"},c.a.createElement("i",{className:"nc-icon nc-basket"}))),!localStorage.getItem("role")&&c.a.createElement(b.a,null,c.a.createElement(u.b,{to:"/register",className:"nav-link btn-rotate"},c.a.createElement("i",{className:"nc-icon nc-bell-55"}),"Register")),localStorage.getItem("role")&&c.a.createElement(p.a,{onClick:this.props.odjava},"Log out")))))}}]),a}(c.a.Component),Xe=(c.a.Component,a(545)),$e=a.n(Xe),Qe=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var l;return Object(n.a)(this,a),(l=t.call(this,e)).activeRoute.bind(Object(r.a)(l)),l.sidebar=c.a.createRef(),l}return Object(l.a)(a,[{key:"activeRoute",value:function(e){return this.props.location.pathname.indexOf(e)>-1?"active":""}},{key:"componentDidMount",value:function(){navigator.platform.indexOf("Win")>-1&&(_e=new m.a(this.sidebar.current,{suppressScrollX:!0,suppressScrollY:!1}))}},{key:"componentWillUnmount",value:function(){navigator.platform.indexOf("Win")>-1&&_e.destroy()}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"sidebar","data-color":this.props.bgColor,"data-active-color":this.props.activeColor},c.a.createElement("div",{className:"logo"},c.a.createElement("a",{href:"https://www.creative-tim.com",className:"simple-text logo-mini"},c.a.createElement("div",{className:"logo-img"},c.a.createElement("img",{src:$e.a,alt:"react-logo"}))),c.a.createElement("a",{href:"https://www.creative-tim.com",className:"simple-text logo-normal"},"RENT-A-CAR")),c.a.createElement("div",{className:"sidebar-wrapper",ref:this.sidebar},c.a.createElement(v.a,null,this.props.routes.map((function(t,a){return c.a.createElement("li",{className:e.activeRoute(t.path)+(t.pro?" active-pro":""),key:a},c.a.createElement(u.c,{to:t.path,className:"nav-link",activeClassName:"active"},c.a.createElement("i",{className:t.icon}),c.a.createElement("p",null,t.name)))})))))}}]),a}(c.a.Component),et=(s.Component,[{path:"/ads",name:"Ads",icon:"nc-icon nc-caps-small",component:Se}]),tt=[{path:"/profile",name:"Profile",icon:"fa fa-user-circle",component:Be},{path:"/codebook",name:"Codebook",icon:"nc-icon nc-bank",component:G,layout:"/admin"},{path:"/pricelist",name:"Pricelist",icon:"nc-icon nc-tile-56",component:ee,layout:"/admin"},{path:"/ads",name:"Ads",icon:"nc-icon nc-caps-small",component:Se},{path:"/newad",name:"New Ad",icon:"nc-icon nc-caps-small",component:ae},{icon:"nc-icon nc-box-2",path:"/requests",name:"Requests",component:Pe},{icon:"nc-icon nc-box-2",path:"/messages",name:"Messages",component:Ze}],at=[{path:"/profile",name:"Profile",icon:"fa fa-user-circle",component:Be},{path:"/ads",name:"Ads",icon:"nc-icon nc-caps-small",component:Se},{path:"/orders",name:"Orders",icon:"nc-icon nc-spaceship",component:Ye},{path:"/newad",name:"New Ad",icon:"nc-icon nc-caps-small",component:ae},{icon:"nc-icon nc-box-2",path:"/requests",name:"Requests",component:Pe},{icon:"nc-icon nc-box-2",path:"/messages",name:"Messages",component:Ze}],nt=[{path:"/profile",name:"Profile",icon:"fa fa-user-circle",component:Be,layout:"/admin"},{path:"/codebook",name:"Codebook",icon:"fa fa-book",component:G,layout:"/admin"},{path:"/pricelist",name:"Pricelist",icon:"nc-icon nc-tile-56",component:ee,layout:"/admin"},{path:"/dashboard",name:"Dashboard",icon:"nc-icon nc-bank",component:w},{path:"/comments",name:"Comments",icon:"fa fa-comments-o",component:Ve}],lt=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var l;return Object(n.a)(this,a),(l=t.call(this,e)).validateEmail=function(e){/\S+@\S+\.\S+/.test(e.target.value)?l.setState({formValidMail:!1,emailErrorText:""}):l.setState({formValidMail:!0,emailErrorText:"Expected input: local@domain."})},l.AccountRecovery=function(e){var t=[];t.push(l.state.email),C()({method:"post",url:"https://localhost:8082/authpoint/auth/forgotPassword",data:t,ContentType:"application/json"}).then((function(e){e.status}),(function(e){}))},l.Login=function(e){console.log("ASDAS"),l.setState({primary:!0}),l.cleanAll(),l.togglePrimary()},l.validateLoginFields=function(){return""===l.state.username||""===l.state.password?(l.setState({notFilledError:!0,formValid:!0}),!0):(l.setState({notFilledError:!1,formValid:!1}),!1)},l.validateUsername=function(){""===l.state.username?l.setState({usernameErrorText:"Username is required.",formValid:!0,formErrorText:""}):/^[A-Za-z0-9\-\_]+/.test(l.state.username)?l.setState({usernameErrorText:"",formErrorText:"",formValid:!1}):l.setState({usernameErrorText:"Alfanumerics, _ and - are only allowed.",formValid:!0,formErrorText:""})},l.cleanAll=function(){return l.setState({registerShow:!1,password:"",formValid:!0,usernameErrorText:"",notFilledError:!1,formErrorText:"",passErrorText:"",username:""})},l.sendLogin=function(e){if(e.preventDefault(),l.validateLoginFields())l.setState({formErrorText:"Both fields are required.",formValid:!0});else{l.setState({formValid:!1});var t={username:l.state.username,password:l.state.password};C()({method:"post",url:"https://localhost:8082/authpoint/auth/login",data:t,ContentType:"application/json"}).then((function(e){if(200===e.status){console.log(e.data),localStorage.setItem("ulogovan",e.data.accessToken),localStorage.setItem("role",e.data.role),localStorage.setItem("name",e.data.name),console.log(e.data);sessionStorage.setItem("basket",JSON.stringify([])),"ROLE_ADMIN"===e.data.role?l.props.history.push("/dashboard"):l.props.history.push("/ads")}}),(function(e){})),l.cleanAll(),l.togglePrimary()}},l.navig=function(){return"ROLE_ADMIN"===localStorage.getItem("role")?nt:"ROLE_SELLER"===localStorage.getItem("role")?tt:"ROLE_CUSTOMER"===localStorage.getItem("role")?at:et},l.state={backgroundColor:"black",activeColor:"warning",username:"",password:"",formValid:!0,notFilledError:!0,formErrorText:"",passErrorText:"",usernameErrorText:"",changeFirstPass:!1,password1:"",password11:"",password11Validation:"",password1Validation:"",modal:!1,primary:!1,hideInputMail:!0,emailErrorText:"",formValidMail:!0,email:""},l.mainPanel=c.a.createRef(),l.togglePrimary=l.togglePrimary.bind(Object(r.a)(l)),l.validateLoginFields=l.validateLoginFields.bind(Object(r.a)(l)),l.Login=l.Login.bind(Object(r.a)(l)),l.validateUsername=l.validateUsername.bind(Object(r.a)(l)),l.signOut=l.signOut.bind(Object(r.a)(l)),l.navig=l.navig.bind(Object(r.a)(l)),l.validateEmail=l.validateEmail.bind(Object(r.a)(l)),l.AccountRecovery=l.AccountRecovery.bind(Object(r.a)(l)),l}return Object(l.a)(a,[{key:"componentDidMount",value:function(){navigator.platform.indexOf("Win")>-1&&(We=new m.a(this.mainPanel.current),document.body.classList.toggle("perfect-scrollbar-on"))}},{key:"componentWillUnmount",value:function(){navigator.platform.indexOf("Win")>-1&&(We.destroy(),document.body.classList.toggle("perfect-scrollbar-on"))}},{key:"componentDidUpdate",value:function(e){"PUSH"===e.history.action&&(this.mainPanel.current.scrollTop=0,document.scrollingElement.scrollTop=0)}},{key:"togglePrimary",value:function(){this.setState({primary:!this.state.primary})}},{key:"signOut",value:function(e){e.preventDefault(),localStorage.removeItem("ulogovan"),localStorage.removeItem("role"),localStorage.removeItem("start"),localStorage.removeItem("end"),localStorage.removeItem("name"),sessionStorage.removeItem("basket"),this.props.history.push("/ads")}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"wrapper"},c.a.createElement(Qe,Object.assign({},this.props,{isOpen:!1,routes:this.navig(),bgColor:this.state.backgroundColor,activeColor:this.state.activeColor})),c.a.createElement("div",{className:"main-panel",ref:this.mainPanel},c.a.createElement(Je,Object.assign({openModal:function(t){return e.Login(t)},odjava:function(t){return e.signOut(t)}},this.props)),c.a.createElement(d.d,null,Ge.map((function(e,t){return c.a.createElement(d.b,{authorize:e.authorize,path:e.path,component:e.component,key:t})})))),c.a.createElement(ie.a,{isOpen:this.state.primary,toggle:this.togglePrimary,className:"modal-primary "+this.props.className},c.a.createElement(we.a,null,"Sign in to your account"),c.a.createElement(Te.a,null,c.a.createElement(F.a,null,c.a.createElement(se.a,{className:"mb-3 "},c.a.createElement(ce.a,{addonType:"prepend"},c.a.createElement(me.a,null,c.a.createElement("i",{className:"nc-icon nc-single-02"}))),c.a.createElement(B.a,{type:"text",placeholder:"Username",autoComplete:"username",value:this.state.username,onChange:function(t){return e.setState({username:t.target.value})},onBlur:this.validateUsername}),c.a.createElement(H.a,{color:"danger"},this.state.usernameErrorText)),c.a.createElement(se.a,{className:"mb-4 "},c.a.createElement(ce.a,{addonType:"prepend"},c.a.createElement(me.a,null,c.a.createElement("i",{className:"nc-icon nc-key-25"}))),c.a.createElement(B.a,{type:"password",placeholder:"Password",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}}),c.a.createElement(H.a,{color:"danger"},this.state.passErrorText)),c.a.createElement(y.a,null,c.a.createElement(H.a,{color:"danger"},this.state.formErrorText)),c.a.createElement(Y.a,{color:"info",hidden:this.state.hideInputMail},"Enter your email and we will send you recovery details:"),c.a.createElement(se.a,{className:"mb-4",hidden:this.state.hideInputMail},c.a.createElement(ce.a,{addonType:"prepend"},c.a.createElement(me.a,null,"@")),c.a.createElement(B.a,{type:"text",placeholder:"email",value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})},onBlur:this.validateEmail}),c.a.createElement(H.a,{color:"danger"},this.state.emailErrorText)),c.a.createElement(y.a,null,c.a.createElement(H.a,{color:"danger"},this.state.formErrorText)),c.a.createElement(y.a,{className:"text-center"},c.a.createElement("div",{class:"text-center"},c.a.createElement(P.a,{color:"link",size:"sm",onClick:function(t){return e.setState({hideInputMail:!e.state.hideInputMail})}},"Forgot password? "))))),c.a.createElement(Ne.a,null,!this.state.hideInputMail&&c.a.createElement(P.a,{color:"primary",onClick:this.AccountRecovery,disabled:this.state.formValidMail},"Send email")," ",this.state.hideInputMail&&c.a.createElement(P.a,{color:"primary",onClick:this.sendLogin,disabled:this.state.formValid},"Log in")," ",c.a.createElement(P.a,{color:"danger",onClick:this.togglePrimary},"Cancel"))))}}]),a}(c.a.Component);t.default=lt},485:function(e,t,a){e.exports=a.p+"static/media/damir-bosnjak.a6f24e7d.jpg"},486:function(e,t,a){e.exports=a.p+"static/media/mike.aab414f7.jpg"},487:function(e,t,a){e.exports=a.p+"static/media/ayo-ogunseinde-2.bfc688ca.jpg"},488:function(e,t,a){e.exports=a.p+"static/media/joe-gardner-2.76ff47ae.jpg"},489:function(e,t,a){e.exports=a.p+"static/media/clem-onojeghuo-2.bb4b9ac9.jpg"},545:function(e,t,a){e.exports=a.p+"static/media/logo.ee7cd8ed.svg"}}]);
//# sourceMappingURL=6.7e25c0b4.chunk.js.map